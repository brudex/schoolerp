(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{IERF:function(e,t,n){var s=n("uwq4");"string"==typeof s&&(s=[[e.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(s,a);s.locals&&(e.exports=s.locals)},K6kP:function(e,t,n){"use strict";var s=n("IERF");n.n(s).a},iU5K:function(e,t,n){"use strict";n.r(t);var s={components:{},data:function(){return{filter:{department_id:[],designation_id:[],employee_category_id:[],month:""},date:"",days:0,employees:[],departments:[],designations:[],employee_categories:[],selected_designations:null,selected_departments:null,selected_employee_categories:null,attendance_summary_with_name:[]}},mounted:function(){this.filter.month=moment().format("YYYY-MM"),this.getPreRequisite()},methods:{hasPermission:function(e){return helper.hasPermission(e)},getEmployeeNameWithCode:function(e){return helper.getEmployeeNameWithCode(e)},getEmployeeDesignationOnDate:function(e,t){return helper.getEmployeeDesignationOnDate(e,t)},getPreRequisite:function(){var e=this,t=this.$loading.show();axios.get("/api/employee/attendance/regular/pre-requisite").then((function(n){e.departments=n.departments,e.designations=n.designations,e.employee_categories=n.employee_categories,t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},list:function(){var e=this,t=this.$loading.show();this.filter.month=moment(this.filter.month).format("YYYY-MM"),axios.post("/api/employee/attendance/regular/list",{department_id:this.filter.department_id,designation_id:this.filter.designation_id,employee_category_id:this.filter.employee_category_id,month:this.filter.month}).then((function(n){e.employees=n.employees,e.attendance_summary_with_name=n.attendance_summary_with_name,t.hide()})).catch((function(e){t.hide(),helper.showErrorMsg()}))},onDepartmentSelect:function(e){this.filter.department_id.push(e.id)},onDepartmentRemove:function(e){this.filter.department_id.splice(this.filter.department_id.indexOf(e.id),1)},onDesignationSelect:function(e){this.filter.designation_id.push(e.id)},onDesignationRemove:function(e){this.filter.designation_id.splice(this.filter.designation_id.indexOf(e.id),1)},onEmployeeCategorySelect:function(e){this.filter.employee_category_id.push(e.id)},onEmployeeCategoryRemove:function(e){this.filter.employee_category_id.splice(this.filter.employee_category_id.indexOf(e.id),1)},getAttendanceSummary:function(e,t){var n=e.summary.find((function(e){return e.symbol==t}));return void 0===n?0:n.value}},watch:{"filter.month":function(e){this.date=moment(e,"YYYY-MM")+"-01",this.days=moment(e,"YYYY-MM").daysInMonth()}}},a=(n("K6kP"),n("KHd+")),i=Object(a.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"page-titles"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-6"},[n("h3",{staticClass:"text-themecolor"},[e._v(e._s(e.trans("employee.list_attendance")))])]),e._v(" "),n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"action-buttons pull-right"},[n("button",{staticClass:"btn btn-info btn-sm",on:{click:function(t){return e.$router.push("/employee/attendance/regular")}}},[n("i",{staticClass:"fas fa-check"}),e._v(" "),n("span",{staticClass:"d-none d-sm-inline"},[e._v(e._s(e.trans("employee.mark_attendance")))])])])])])]),e._v(" "),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body p-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.category")))]),e._v(" "),n("v-select",{attrs:{label:"name","track-by":"id",name:"employee_category_id",id:"employee_category_id",options:e.employee_categories,placeholder:e.trans("employee.select_employee_category"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_employee_categories},on:{select:e.onEmployeeCategorySelect,remove:e.onEmployeeCategoryRemove},model:{value:e.selected_employee_categories,callback:function(t){e.selected_employee_categories=t},expression:"selected_employee_categories"}},[e.employee_categories.length?e._e():n("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])])],1)]),e._v(" "),n("div",{staticClass:"col-12 col-sm-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.designation")))]),e._v(" "),n("v-select",{attrs:{label:"name","track-by":"id",name:"designation_id",id:"designation_id",options:e.designations,placeholder:e.trans("employee.select_designation"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_designations},on:{select:e.onDesignationSelect,remove:e.onDesignationRemove},model:{value:e.selected_designations,callback:function(t){e.selected_designations=t},expression:"selected_designations"}},[e.designations.length?e._e():n("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])])],1)]),e._v(" "),n("div",{staticClass:"col-12 col-sm-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.department")))]),e._v(" "),n("v-select",{attrs:{label:"name","track-by":"id",name:"department_id",id:"department_id",options:e.departments,placeholder:e.trans("employee.select_department"),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"hide-selected":!0,selected:e.selected_departments},on:{select:e.onDepartmentSelect,remove:e.onDepartmentRemove},model:{value:e.selected_departments,callback:function(t){e.selected_departments=t},expression:"selected_departments"}},[e.departments.length?e._e():n("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[e._v("\n                                    "+e._s(e.trans("general.no_option_found"))+"\n                                ")])])],1)]),e._v(" "),n("div",{staticClass:"col-12 col-sm-3"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[e._v(e._s(e.trans("employee.attendance_month")))]),e._v(" "),n("vue-monthly-picker",{attrs:{name:"month",placeHolder:e.trans("employee.attendance_month"),dateFormat:"YYYY-MM "},model:{value:e.filter.month,callback:function(t){e.$set(e.filter,"month",t)},expression:"filter.month"}})],1)])]),e._v(" "),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-info pull-right",attrs:{type:"button"},on:{click:e.list}},[e._v(e._s(e.trans("general.filter")))])]),e._v(" "),n("div",{staticClass:"clearfix"}),e._v(" "),e.employees.length?n("div",{staticClass:"row m-t-20"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"table-responsive font-90pc p-2"},[n("table",{staticClass:"table table-sm table-bordered attendance-table"},[n("thead",[n("tr",[n("th",[e._v(e._s(e.trans("employee.employee")))]),e._v(" "),e._l(e.days,(function(t){return n("th",{staticClass:"date-cell"},[e._v(e._s(t))])})),e._v(" "),e._l(e.attendance_summary_with_name,(function(t){return n("th",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.name,expression:"attendance.name"}],staticClass:"text-center font-weight-bold"},[e._v("\n                                            "+e._s(t.symbol)+"\n                                        ")])}))],2)]),e._v(" "),n("tbody",e._l(e.employees,(function(t){return n("tr",[n("td",[e._v("\n                                            "+e._s(e.getEmployeeNameWithCode(t))+" "),n("br"),e._v(" "),n("span",{staticClass:"font-90pc"},[e._v(e._s(e.getEmployeeDesignationOnDate(t,e.date)))])]),e._v(" "),e._l(t.attendances,(function(t){return n("td",{class:"text-center font-weight-bold text-"+t.color},["H"==t.symbol?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.description,expression:"attendance.description"}],staticClass:"marking-cell"},[n("i",{staticClass:"fas fa-hospital-symbol"})]):n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.description,expression:"attendance.description"}],staticClass:"marking-cell"},[e._v("\n                                                "+e._s(t.symbol)+"\n                                            ")])])})),e._v(" "),e._l(e.attendance_summary_with_name,(function(s){return n("td",{staticClass:"text-center font-weight-bold"},[e._v("\n                                            "+e._s(e.getAttendanceSummary(t,s.symbol))+"\n                                        ")])}))],2)})),0)])])])]):e._e()])])])])}),[],!1,null,null,null);t.default=i.exports},uwq4:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.attendance-table tr th.date-cell{\n    text-align: center;\n    min-width: 20px;\n    max-width: 20px;\n}\n.attendance-table tr td {\n    vertical-align: middle;\n}\n.attendance-table tr td span.marking-cell {\n    display: block;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n",""])}}]);
//# sourceMappingURL=index.js.map?id=8f2a2cfb875dec556035