(window.webpackJsonp=window.webpackJsonp||[]).push([[332],{"+xVU":function(t,e,n){"use strict";var a={props:["studentRecord"],data:function(){return{student_record:{}}},mounted:function(){},methods:{getStudentName:function(t){return helper.getStudentName(t)},getAdmissionNumber:function(t){return helper.getAdmissionNumber(t)}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}},computed:{getImage:function(){return this.student_record.student.student_photo?"/"+this.student_record.student.student_photo:"female"==this.student_record.student.gender?"/images/female.png":"/images/male.png"}},watch:{studentRecord:function(t){this.student_record=t}}},s=n("KHd+"),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.student_record.student?n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-3"},[n("div",{staticClass:"form-group text-center"},[n("img",{staticClass:"img-fluid",staticStyle:{"max-width":"200px"},attrs:{src:t.getImage}})])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-4"},[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-borderless custom-show-table"},[n("tbody",[n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.name")))]),t._v(" "),n("td",[t._v(t._s(t.getStudentName(t.student_record.student)))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.admission_number")))]),t._v(" "),n("td",[t._v(t._s(t.getAdmissionNumber(t.student_record.admission)))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.date_of_admission")))]),t._v(" "),n("td",[t._v(t._s(t._f("moment")(t.student_record.admission.date_of_admission)))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("academic.course")))]),t._v(" "),n("td",[t._v(t._s(t.student_record.batch.course.name+" ("+t.student_record.batch.course.course_group.name+")"))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("academic.batch")))]),t._v(" "),n("td",[t._v(t._s(t.student_record.batch.name))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.date_of_birth")))]),t._v(" "),n("td",[t._v(t._s(t._f("moment")(t.student_record.student.date_of_birth)))])])])])])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-4"},[n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-borderless custom-show-table"},[n("tbody",[n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.father_name")))]),t._v(" "),n("td",[t._v(t._s(t.student_record.student.parent?t.student_record.student.parent.father_name:""))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.mother_name")))]),t._v(" "),n("td",[t._v(t._s(t.student_record.student.parent?t.student_record.student.parent.mother_name:""))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.contact_number")))]),t._v(" "),n("td",[t._v(t._s(t.student_record.student.contact_number))])]),t._v(" "),n("tr",[n("td",{staticClass:"font-weight-bold"},[t._v(t._s(t.trans("student.present_address")))]),t._v(" "),n("td",[t._v("\n\t                            "+t._s(t.student_record.student.present_address_line_1)+"\n\t                            "),t.student_record.student.present_address_line_2?n("span",[t._v(", "+t._s(t.student_record.student.present_address_line_2))]):t._e(),t._v(" "),t.student_record.student.present_city?n("span",[n("br"),t._v(" "+t._s(t.student_record.student.present_city))]):t._e(),t._v(" "),t.student_record.student.present_state?n("span",[t._v(", "+t._s(t.student_record.student.present_state))]):t._e(),t._v(" "),t.student_record.student.present_zipcode?n("span",[t._v(", "+t._s(t.student_record.student.present_zipcode))]):t._e(),t._v(" "),t.student_record.student.present_country?n("span",[n("br"),t._v(" "+t._s(t.student_record.student.present_country))]):t._e()])])])])])])]):t._e()}),[],!1,null,null,null);e.a=r.exports},"5JOc":function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.loading-overlay.is-full-page{\n    z-index: 1060;\n}\n",""])},JOwt:function(t,e,n){"use strict";var a=n("xjXw");n.n(a).a},bDPD:function(t,e,n){var a=n("f8rh");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,s);a.locals&&(t.exports=a.locals)},f8rh:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"\n.loading-overlay.is-full-page{\n    z-index: 1060;\n}\n",""])},pyeP:function(t,e,n){"use strict";n.r(e);var a=n("+xVU"),s={components:{},props:["id","uuid","feePayment"],data:function(){return{feePaymentForm:new Form({amount:0,additional_fee_discount:0,additional_fee_charge:0,additional_fee_charge_label:"",additional_fee_discount_label:"",installments:[],installment_id:"",account_id:"",payment_method_id:"",date:"",instrument_date:"",instrument_number:"",instrument_clearing_date:"",instrument_bank_detail:"",reference_number:"",remarks:""}),total:0,selected_account:null,accounts:[],payment_methods:[],selected_payment_method:null,payment_method_details:[],payment_method_detail:{}}},mounted:function(){this.loadFeePayment(this.feePayment),this.getPreRequisite()},methods:{hasPermission:function(t){return helper.hasPermission(t)},loadFeePayment:function(t){var e=this;this.feePaymentForm.date=t.date,this.feePaymentForm.installment_id=t.fee_payment_installment_id,this.feePaymentForm.amount=t.amount,this.total=0,this.feePaymentForm.installments=[],t.installments.forEach((function(t){e.feePaymentForm.installments.push({fee_installment_id:t.fee_installment_id,title:t.title,installment_balance:t.installment_balance,late_fee_balance:t.late_fee_balance})}))},getInstallmentTotal:function(t){return t.installment_balance+parseInt(t.late_fee_balance)},getPreRequisite:function(){var t=this,e=this.$loading.show();axios.get("/api/student/fee/pre-requisite").then((function(n){t.accounts=n.accounts,t.payment_methods=n.payment_methods,t.payment_method_details=n.payment_method_details,e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},getPaymentMethodDetail:function(t){return helper.getPaymentMethodDetail(this.payment_method_detail,t)},onAccountSelect:function(t){this.feePaymentForm.account_id=t.id},onPaymentMethodSelect:function(t){this.feePaymentForm.payment_method_id=t.id,this.payment_method_detail=this.payment_method_details.find((function(e){return e.id==t.id}))},onPaymentMethodRemove:function(t){this.feePaymentForm.payment_method_id="",this.payment_method_detail=null},formatCurrency:function(t){return helper.formatCurrency(t)},submit:function(){var t=this,e=this.$loading.show();this.feePaymentForm.post("/api/student/"+this.uuid+"/payment/"+this.id).then((function(n){toastr.success(n.message),t.$emit("completed"),t.selected_account=null,t.selected_payment_method=null,t.feePaymentForm.installments=[],e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))}},computed:{getGrandTotal:function(){var t=0;return Array.isArray(this.feePaymentForm.installments)?(this.feePaymentForm.installments.forEach((function(e){t+=e.installment_balance+parseInt(e.late_fee_balance)})),t+ +this.feePaymentForm.additional_fee_charge-+this.feePaymentForm.additional_fee_discount):t}},watch:{feePayment:function(t){this.loadFeePayment(t)},getGrandTotal:function(t){this.feePaymentForm.amount=t}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}}},r=n("KHd+"),i=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container modal-lg"},[n("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n                        "+t._s(t.trans("finance.fee_payment"))+"\n                        "),n("span",{staticClass:"float-right pointer",on:{click:function(e){return t.$emit("closeFeePaymentForm")}}},[t._v("x")])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",[n("h4",[t._v(t._s(t.feePayment.fee_group_name)+" "),n("span",{staticClass:"pull-right"},[t._v(t._s(t._f("moment")(t.feePayment.date)))])]),t._v(" "),n("div",{staticStyle:{"max-height":"600px"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)},keydown:function(e){return t.feePaymentForm.errors.clear(e.target.name)}}},[n("div",{staticClass:"table-responsive p-2"},[n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.trans("finance.fee_installment")))]),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.trans("finance.installment_total")))]),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.trans("finance.late_fee")))]),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.trans("general.total")))])])]),t._v(" "),n("tbody",t._l(t.feePaymentForm.installments,(function(e){return n("tr",[n("td",{domProps:{textContent:t._s(e.title)}}),t._v(" "),n("td",{staticClass:"text-right",domProps:{textContent:t._s(e.installment_balance)}}),t._v(" "),n("td",{staticClass:"text-right"},[t.hasPermission("customize-late-fee")?[n("input",{directives:[{name:"model",rawName:"v-model",value:e.late_fee_balance,expression:"installment.late_fee_balance"}],staticClass:"invoice-input",attrs:{type:"text"},domProps:{value:e.late_fee_balance},on:{input:function(n){n.target.composing||t.$set(e,"late_fee_balance",n.target.value)}}})]:[t._v("\n                                                        "+t._s(e.late_fee_balance)+"\n                                                    ")]],2),t._v(" "),n("td",{staticClass:"text-right",domProps:{textContent:t._s(t.getInstallmentTotal(e))}})])})),0),t._v(" "),n("tfoot",[n("tr",[n("td",[t._v(t._s(t.trans("student.additional_fee_charge")))]),t._v(" "),n("td",{attrs:{colspan:"2"}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.additional_fee_charge_label,expression:"feePaymentForm.additional_fee_charge_label"}],staticClass:"invoice-input-left",attrs:{type:"text",name:"additional_fee_charge_label",placeholder:t.trans("student.fee_label")},domProps:{value:t.feePaymentForm.additional_fee_charge_label},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"additional_fee_charge_label",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"additional_fee_charge_label"}})],1)]),t._v(" "),n("td",{staticClass:"text-right"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.additional_fee_charge,expression:"feePaymentForm.additional_fee_charge"}],staticClass:"invoice-input",attrs:{type:"text",name:"additional_fee_charge",placeholder:t.trans("student.additional_fee_charge")},domProps:{value:t.feePaymentForm.additional_fee_charge},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"additional_fee_charge",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"additional_fee_charge"}})],1)])]),t._v(" "),n("tr",[n("td",[t._v(t._s(t.trans("student.additional_fee_discount")))]),t._v(" "),n("td",{attrs:{colspan:"2"}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.additional_fee_discount_label,expression:"feePaymentForm.additional_fee_discount_label"}],staticClass:"invoice-input-left",attrs:{type:"text",name:"additional_fee_discount_label",placeholder:t.trans("student.fee_label")},domProps:{value:t.feePaymentForm.additional_fee_discount_label},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"additional_fee_discount_label",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"additional_fee_discount_label"}})],1)]),t._v(" "),n("td",{staticClass:"text-right"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.additional_fee_discount,expression:"feePaymentForm.additional_fee_discount"}],staticClass:"invoice-input",attrs:{type:"text",name:"additional_fee_discount",placeholder:t.trans("student.additional_fee_discount")},domProps:{value:t.feePaymentForm.additional_fee_discount},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"additional_fee_discount",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"additional_fee_discount"}})],1)])]),t._v(" "),n("tr",[n("th",[t._v(t._s(t.trans("general.total")))]),t._v(" "),n("th",{attrs:{colspan:"2"}}),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.formatCurrency(t.getGrandTotal)))])]),t._v(" "),t.hasPermission("make-partial-fee-payment")?n("tr",[n("th",[t._v(t._s(t.trans("finance.amount")))]),t._v(" "),n("th",{attrs:{colspan:"2"}}),t._v(" "),n("th",{staticClass:"text-right"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.amount,expression:"feePaymentForm.amount"}],staticClass:"invoice-input",attrs:{type:"text",name:"amount",placeholder:t.trans("finance.amount")},domProps:{value:t.feePaymentForm.amount},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"amount",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"amount"}})],1)]):t._e()])])]),t._v(" "),n("div",{staticClass:"row"},[t.feePaymentForm.amount?[n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.account")))]),t._v(" "),n("v-select",{attrs:{label:"name",name:"account_id",id:"account_id",options:t.accounts,placeholder:t.trans("account.select_account")},on:{select:t.onAccountSelect,close:function(e){return t.feePaymentForm.errors.clear("account_id")},remove:function(e){t.feePaymentForm.account_id=""}},model:{value:t.selected_account,callback:function(e){t.selected_account=e},expression:"selected_account"}},[t.accounts.length?t._e():n("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n                                                        "+t._s(t.trans("general.no_option_found"))+"\n                                                    ")])]),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"account_id"}})],1)]),t._v(" "),n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.payment_method")))]),t._v(" "),n("v-select",{attrs:{label:"name",name:"payment_method_id",id:"payment_method_id",options:t.payment_methods,placeholder:t.trans("payment_method.select_payment_method")},on:{select:t.onPaymentMethodSelect,close:function(e){return t.feePaymentForm.errors.clear("payment_method_id")},remove:t.onPaymentMethodRemove},model:{value:t.selected_payment_method,callback:function(e){t.selected_payment_method=e},expression:"selected_payment_method"}},[t.payment_methods.length?t._e():n("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n                                                        "+t._s(t.trans("general.no_option_found"))+"\n                                                    ")])]),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"payment_method_id"}})],1)])]:t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_number")?n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_number")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.instrument_number,expression:"feePaymentForm.instrument_number"}],staticClass:"form-control",attrs:{type:"text",name:"instrument_number",placeholder:t.trans("finance.instrument_number")},domProps:{value:t.feePaymentForm.instrument_number},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"instrument_number",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"instrument_number"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_date")?n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_date")))]),t._v(" "),n("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("finance.instrument_date")},on:{selected:function(e){return t.feePaymentForm.errors.clear("instrument_date")}},model:{value:t.feePaymentForm.instrument_date,callback:function(e){t.$set(t.feePaymentForm,"instrument_date",e)},expression:"feePaymentForm.instrument_date"}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"instrument_date"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_bank_detail")?n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_bank_detail")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.instrument_bank_detail,expression:"feePaymentForm.instrument_bank_detail"}],staticClass:"form-control",attrs:{type:"text",name:"instrument_bank_detail",placeholder:t.trans("finance.instrument_bank_detail")},domProps:{value:t.feePaymentForm.instrument_bank_detail},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"instrument_bank_detail",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"instrument_bank_detail"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_clearing_date")?n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_clearing_date")))]),t._v(" "),n("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("finance.instrument_clearing_date")},on:{selected:function(e){return t.feePaymentForm.errors.clear("instrument_clearing_date")}},model:{value:t.feePaymentForm.instrument_clearing_date,callback:function(e){t.$set(t.feePaymentForm,"instrument_clearing_date",e)},expression:"feePaymentForm.instrument_clearing_date"}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"instrument_clearing_date"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("reference_number")?n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.reference_number")))]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.feePaymentForm.reference_number,expression:"feePaymentForm.reference_number"}],staticClass:"form-control",attrs:{type:"text",name:"reference_number",placeholder:t.trans("finance.reference_number")},domProps:{value:t.feePaymentForm.reference_number},on:{input:function(e){e.target.composing||t.$set(t.feePaymentForm,"reference_number",e.target.value)}}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"reference_number"}})],1)]):t._e(),t._v(" "),n("div",{staticClass:"col-12 col-sm-12"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.fee_payment_remarks")))]),t._v(" "),n("autosize-textarea",{attrs:{rows:"2",name:"remarks",placeholder:t.trans("finance.fee_payment_remarks")},model:{value:t.feePaymentForm.remarks,callback:function(e){t.$set(t.feePaymentForm,"remarks",e)},expression:"feePaymentForm.remarks"}}),t._v(" "),n("show-error",{attrs:{"form-name":t.feePaymentForm,"prop-name":"remarks"}})],1)])],2),t._v(" "),n("button",{staticClass:"btn btn-info waves-effect waves-light pull-right",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])]),t._v(" "),n("div",{staticClass:"clearfix"})])],2)])])])])}),[],!1,null,null,null).exports,o={components:{},props:["id","uuid","feePayment"],data:function(){return{default_currency:helper.getConfig("default_currency"),payment_gateway:"",razorpay_loaded:0,stripe_loaded:0,total:0,stripe:{card_number:"",month:"",year:"",cvc:""},stripeButton:!0,paypalButton:!0,feePaymentForm:new Form({amount:0,installment_id:"",date:"",installments:[]})}},mounted:function(){this.loadFeePayment(this.feePayment),"INR"!=this.default_currency.name&&helper.getConfig("mode")||!this.getConfig("razorpay")||this.injectRazorpay()},methods:{getConfig:function(t){return helper.getConfig(t)},loadFeePayment:function(t){var e=this;this.feePaymentForm.amount=t.amount,this.feePaymentForm.installment_id=t.fee_payment_installment_id,this.feePaymentForm.date=t.date,this.feePaymentForm.installments=[],this.total=0,t.installments.forEach((function(t){e.feePaymentForm.installments.push({fee_installment_id:t.fee_installment_id,title:t.title,installment_balance:t.installment_balance,late_fee_balance:t.late_fee_balance})}))},getInstallmentTotal:function(t){return t.installment_balance+parseInt(t.late_fee_balance)},formatCurrency:function(t){return helper.formatCurrency(t)},setPaymentGateway:function(t){this.payment_gateway=t},stripeCheckout:function(){var t=this.$loading.show();this.stripeButton=!1,Stripe.setPublishableKey(this.getConfig("stripe_publishable_key")),Stripe.card.createToken({number:this.stripe.card_number,cvc:this.stripe.cvc,exp_month:this.stripe.month,exp_year:this.stripe.year},this.stripeResponseHandler),t.hide()},stripeResponseHandler:function(t,e){var n=this;if(200==t){var a=this.$loading.show();axios.post("/api/student/"+this.uuid+"/payment/"+this.id+"/stripe",{stripeToken:e.id,amount:100*this.total,fee:this.feePaymentForm.amount,handling_fee:this.handlingFee,fee_installment_id:this.feePaymentForm.installment_id,installments:this.feePaymentForm.installments}).then((function(t){a.hide(),toastr.success(t.message),n.$emit("completed"),n.stripeButton=!0})).catch((function(t){a.hide(),helper.showErrorMsg(t),n.stripeButton=!0}))}else toastr.error(e.error.message),this.stripeButton=!0},injectRazorpay:function(){var t=this,e=$.Deferred(),n=document.createElement("script");return n.async="async",n.type="text/javascript",n.src="https://checkout.razorpay.com/v1/checkout.js",n.onload=n.onreadystatechange=function(a,s){n.readyState&&!/loaded|complete/.test(n.readyState)||(s?e.reject():e.resolve()),t.razorpay_loaded=1},n.onerror=function(){e.reject()},document.head.appendChild(n),e.promise()},callRazorpay:function(){var t=this,e={key:this.getConfig("razorpay_key"),protocol:"https",hostname:"api.razorpay.com",amount:100*this.total,name:helper.getConfig("institute_name"),description:i18n.finance.fee_payment,image:this.getLogo,prefill:{email:"",contact:"",name:""},notes:{student_record_id:this.id,fee:this.feePaymentForm.amount,handling_fee:this.handlingFee},handler:function(e,n){t.completeRazorpay(e.razorpay_payment_id)}};window.rzpay=new Razorpay(e),rzpay.open()},completeRazorpay:function(t){var e=this,n=this.$loading.show();axios.post("/api/student/"+this.uuid+"/payment/"+this.id+"/rzp",{transaction_id:t,installments:this.feePaymentForm.installments,fee_installment_id:this.feePaymentForm.installment_id}).then((function(t){n.hide(),toastr.success(t.message),e.$emit("completed")})).catch((function(t){n.hide(),helper.showErrorMsg(t)}))},callBillDesk:function(){var t=this.$loading.show();axios.post("student/"+this.uuid+"/payment/"+this.id+"/billdesk",{amount:this.feePaymentForm.amount,installment_id:this.feePaymentForm.installment_id,installments:this.feePaymentForm.installments}).then((function(e){t.hide(),bdPayment.initialize({msg:e.msg,callbackUrl:e.url,options:{enableChildWindowPosting:!0,enablePaymentRetry:!0,retry_attempt_count:3}})})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},callPaypal:function(){var t=this;this.paypalButton=!1;var e=this.$loading.show();axios.post("/api/student/"+this.uuid+"/payment/"+this.id+"/paypal",{amount:this.total,fee:this.feePaymentForm.amount,handling_fee:this.handlingFee,fee_installment_id:this.feePaymentForm.installment_id,installments:this.feePaymentForm.installments}).then((function(t){e.hide(),window.location=t})).catch((function(n){e.hide(),t.paypalButton=!0,helper.showErrorMsg(n)}))},payWithPaystack:function(){if("NGN"==helper.getConfig("default_currency").name||"GHS"==helper.getConfig("default_currency").name){var t=this;PaystackPop.setup({key:this.getConfig("paystack_public_key"),email:helper.getAuthUser("email"),amount:100*this.total,currency:helper.getConfig("default_currency").name,ref:""+Math.floor(1e9*Math.random()+1),metadata:{custom_fields:[{display_name:"Student ID",variable_name:"student_record_id",value:this.id},{display_name:"Amount",variable_name:"fee",value:this.feePaymentForm.amount},{display_name:"Handling Fee",variable_name:"handling_fee",value:this.handlingFee}]},callback:function(e){t.completePaystack(e.reference)},onClose:function(){}}).openIframe()}else toastr.error(i18n.configuration.currency_not_supported)},completePaystack:function(t){var e=this,n=this.$loading.show();axios.post("/api/student/"+this.uuid+"/payment/"+this.id+"/paystack",{transaction_id:t,installments:this.feePaymentForm.installments,fee_installment_id:this.feePaymentForm.installment_id}).then((function(t){n.hide(),toastr.success(t.message),e.$emit("completed")})).catch((function(t){n.hide(),helper.showErrorMsg(t)}))}},computed:{getLogo:function(){return helper.getLogo()},handlingFee:function(){var t=0;if(!this.payment_gateway)return t;if(!helper.getConfig(this.payment_gateway+"_charge_handling_fee"))return t;if(helper.getConfig(this.payment_gateway+"_fixed_handling_fee"))t=helper.getConfig(this.payment_gateway+"_handling_fee");else{var e=helper.getConfig(this.payment_gateway+"_handling_fee");t=this.feePaymentForm.amount*(e/100)}return helper.formatNumber(t)},handlingFeeAmount:function(){if(helper.getConfig(this.payment_gateway+"_charge_handling_fee"))return i18n.finance.handling_fee+" "+helper.formatCurrency(this.handlingFee)},totalAmount:function(){return i18n.finance.payable_amount+" "+helper.formatCurrency(this.total)},getGrandTotal:function(){var t=0;return t=t,Array.isArray(this.feePaymentForm.installments)?(this.feePaymentForm.installments.forEach((function(e){t+=e.installment_balance+parseInt(e.late_fee_balance)})),t=t?t+this.handlingFee:t,this.total=t,t):t}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}}},l=(n("JOwt"),Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container modal-lg"},[n("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n                        "+t._s(t.trans("finance.fee_payment"))+"\n                        "),n("span",{staticClass:"float-right pointer",on:{click:function(e){return t.$emit("closeFeePaymentForm")}}},[t._v("x")])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",[n("h4",[t._v(t._s(t.feePayment.fee_group_name)+" "),n("span",{staticClass:"pull-right"},[t._v(t._s(t._f("moment")(t.feePayment.date)))])]),t._v(" "),n("div",{staticStyle:{"max-height":"600px"}},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)},keydown:function(e){return t.feePaymentForm.errors.clear(e.target.name)}}},[n("div",{staticClass:"table-responsive p-2"},[n("table",{staticClass:"table table-bordered"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.trans("finance.fee_installment")))]),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.trans("finance.installment_total")))]),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.trans("finance.late_fee")))]),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.trans("general.total")))])])]),t._v(" "),n("tbody",t._l(t.feePaymentForm.installments,(function(e){return n("tr",[n("td",{domProps:{textContent:t._s(e.title)}}),t._v(" "),n("td",{staticClass:"text-right",domProps:{textContent:t._s(e.installment_balance)}}),t._v(" "),n("td",{staticClass:"text-right"},[t._v("\n                                                    "+t._s(e.late_fee_balance)+"\n                                                ")]),t._v(" "),n("td",{staticClass:"text-right",domProps:{textContent:t._s(t.getInstallmentTotal(e))}})])})),0),t._v(" "),n("tfoot",[n("tr",[n("th",[t._v(t._s(t.trans("general.total")))]),t._v(" "),n("th",{attrs:{colspan:"2"}}),t._v(" "),n("th",{staticClass:"text-right"},[t._v(t._s(t.formatCurrency(t.getGrandTotal)))])])])])]),t._v(" "),n("div",[n("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("finance.choose_payment_gateway")))]),t._v(" "),t.getConfig("razorpay")&&t.razorpay_loaded?n("div",{staticClass:"radio radio-success"},[n("input",{attrs:{type:"radio",name:"payment_gateway",id:"razorpay",value:"razorpay"},on:{change:function(e){return t.setPaymentGateway("razorpay")}}}),t._v(" "),n("label",{attrs:{for:"razorpay"}},[t._v(" \n                                            Razorpay \n                                        ")])]):t._e(),t._v(" "),t.getConfig("billdesk")?n("div",{staticClass:"radio radio-success"},[n("input",{attrs:{type:"radio",name:"payment_gateway",id:"billdesk",value:"billdesk"},on:{change:function(e){return t.setPaymentGateway("billdesk")}}}),t._v(" "),n("label",{attrs:{for:"billdesk"}},[t._v(" Billdesk ")])]):t._e(),t._v(" "),t.getConfig("stripe")?n("div",{staticClass:"radio radio-success"},[n("input",{attrs:{type:"radio",name:"payment_gateway",id:"stripe",value:"stripe"},on:{change:function(e){return t.setPaymentGateway("stripe")}}}),t._v(" "),n("label",{attrs:{for:"stripe"}},[t._v(" Stripe ")])]):t._e(),t._v(" "),t.getConfig("paystack")?n("div",{staticClass:"radio radio-success"},[n("input",{attrs:{type:"radio",name:"payment_gateway",id:"paystack",value:"paystack"},on:{change:function(e){return t.setPaymentGateway("paystack")}}}),t._v(" "),n("label",{attrs:{for:"paystack"}},[t._v(" Paystack ")])]):t._e(),t._v(" "),t.getConfig("paypal")?n("div",{staticClass:"radio radio-success"},[n("input",{attrs:{type:"radio",name:"payment_gateway",id:"paypal",value:"paypal"},on:{change:function(e){return t.setPaymentGateway("paypal")}}}),t._v(" "),n("label",{attrs:{for:"paypal"}},[t._v(" Paypal ")])]):t._e(),t._v(" "),n("p",[t._v(t._s(t.handlingFeeAmount))]),t._v(" "),n("p",[t._v(t._s(t.totalAmount))]),t._v(" "),"billdesk"==t.payment_gateway?[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.callBillDesk}},[t._v(t._s(t.trans("general.proceed")))])]:t._e(),t._v(" "),"razorpay"==t.payment_gateway?[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.callRazorpay}},[t._v(t._s(t.trans("general.proceed")))])]:t._e(),t._v(" "),"paystack"==t.payment_gateway?[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.payWithPaystack}},[t._v(t._s(t.trans("general.proceed")))])]:t._e(),t._v(" "),"paypal"==t.payment_gateway?[t.paypalButton?n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.callPaypal}},[t._v(t._s(t.trans("general.proceed")))]):t._e()]:t._e(),t._v(" "),"stripe"==t.payment_gateway?[n("div",{staticClass:"row m-t-40"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.stripe.card_number,expression:"stripe.card_number"}],staticClass:"form-control",attrs:{type:"number",maxlength:"16",value:"",placeholder:t.trans("finance.card_number")},domProps:{value:t.stripe.card_number},on:{input:function(e){e.target.composing||t.$set(t.stripe,"card_number",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-3"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.stripe.month,expression:"stripe.month"}],staticClass:"form-control",attrs:{type:"number",value:"",placeholder:t.trans("finance.card_expiry_month")},domProps:{value:t.stripe.month},on:{input:function(e){e.target.composing||t.$set(t.stripe,"month",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-4"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.stripe.year,expression:"stripe.year"}],staticClass:"form-control",attrs:{type:"number",value:"",placeholder:t.trans("finance.card_expiry_year")},domProps:{value:t.stripe.year},on:{input:function(e){e.target.composing||t.$set(t.stripe,"year",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"col-1"}),t._v(" "),n("div",{staticClass:"col-4"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.stripe.cvc,expression:"stripe.cvc"}],staticClass:"form-control",attrs:{type:"number",value:"",placeholder:t.trans("finance.card_cvc")},domProps:{value:t.stripe.cvc},on:{input:function(e){e.target.composing||t.$set(t.stripe,"cvc",e.target.value)}}})])])]),t._v(" "),t.stripeButton?n("button",{staticClass:"btn btn-info waves-effect waves-light pull-right",attrs:{type:"button"},on:{click:t.stripeCheckout}},[n("span",[t._v(t._s(t.trans("general.proceed")))])]):t._e()]:t._e()],2)])])])],2)])])])])}),[],!1,null,null,null).exports),c={components:{},props:["id","uuid","rid"],data:function(){return{transactions:[],transaction:{},cancel_fee_payment:!1,cancelPaymentForm:new Form({cancellation_remarks:""})}},mounted:function(){this.getDetail(this.id)},methods:{hasPermission:function(t){return helper.hasPermission(t)},formatCurrency:function(t){return helper.formatCurrency(t)},getDetail:function(t){var e=this,n=this.$loading.show();axios.get("/api/student/"+this.uuid+"/fee/"+this.rid+"/"+t).then((function(t){e.transactions=t.transactions,e.transaction=t.transactions[0],n.hide()})).catch((function(t){n.hide(),helper.showErrorMsg(t)}))},getEmployeeName:function(t){return helper.getEmployeeName(t)},cancelPayment:function(){var t=this,e=this.$loading.show();this.cancelPaymentForm.post("/api/student/"+this.uuid+"/fee/"+this.rid+"/"+this.id+"/"+this.transaction.id+"/cancel").then((function(n){toastr.success(n.message),t.$emit("completed"),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},printReceipt:function(){var t=this.$loading.show();axios.post("/api/student/"+this.uuid+"/fee/"+this.rid+"/"+this.id+"/"+this.transaction.id+"/print").then((function(e){var n=window.open("/print");t.hide(),n.document.write(e)})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))}},computed:{transactionGroup:function(){var t=[];return this.transaction.groups.forEach((function(e){t.push((e.prefix||"")+""+e.number)})),t.sort(),t}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}},watch:{id:function(t){t&&this.getDetail(t)}}},d=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.transactions,(function(e){return[n("button",{staticClass:"btn btn-info m-r-10",attrs:{type:"button"},on:{click:function(n){t.transaction=e}}},[t._v(t._s((e.prefix||"")+""+e.number))])]})),t._v(" "),n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("finance.print_receipt"),expression:"trans('finance.print_receipt')"}],staticClass:"btn btn-info btn-sm pull-right",attrs:{type:"button"},on:{click:t.printReceipt}},[n("i",{staticClass:"fas fa-print"})]),t._v(" "),t.transaction.id?[n("div",{staticClass:"table-responsive m-t-20"},[n("table",{staticClass:"table table-bordered"},[n("tbody",[n("tr",[n("td",[t._v(t._s(t.trans("finance.receipt_no")))]),t._v(" "),n("td",[t._v(t._s((t.transaction.prefix||"")+""+t.transaction.number)+"\n                                "),t.transactionGroup.length>1?n("span",[t._v("("+t._s(t.transactionGroup.toString())+")")]):t._e()]),t._v(" "),t.transaction.is_online_payment?[n("td",[t._v(t._s(t.trans("finance.payment_method")))]),t._v(" "),n("td",[t._v(t._s(t.trans("finance.online_payment")))])]:[n("td",[t._v(t._s(t.trans("finance.account")))]),t._v(" "),n("td",[t._v(t._s(t.transaction.account?t.transaction.account.name:""))])]],2),t._v(" "),n("tr",[n("td",[t._v(t._s(t.trans("finance.amount")))]),t._v(" "),n("td",[t._v(t._s(t.formatCurrency(t.transaction.amount)))]),t._v(" "),n("td",[t._v(t._s(t.trans("finance.date")))]),t._v(" "),n("td",[t._v(t._s(t._f("moment")(t.transaction.date)))])]),t._v(" "),n("tr",[t.transaction.is_online_payment?[n("td",[t._v(t._s(t.trans("finance.reference_number")))]),t._v(" "),n("td",[t._v(t._s(t.transaction.reference_number))])]:[n("td",[t._v(t._s(t.trans("finance.payment_method")))]),t._v(" "),n("td",[t._v("\n                                    "+t._s(t.transaction.payment_method.name)+"\n                                    "),t.transaction.instrument_number?n("span",[n("br"),t._v(t._s(t.trans("finance.instrument_number"))+": "+t._s(t.transaction.instrument_number))]):t._e(),t._v(" "),t.transaction.instrument_date?n("span",[n("br"),t._v(t._s(t.trans("finance.instrument_date"))+": "),n("span",[t._v(t._s(t._f("moment")(t.transaction.instrument_date)))])]):t._e(),t._v(" "),t.transaction.instrument_clearing_date?n("span",[n("br"),t._v(t._s(t.trans("finance.instrument_clearing_date"))+": "),n("span",[t._v(t._s(t._f("moment")(t.transaction.instrument_clearing_date)))])]):t._e(),t._v(" "),t.transaction.instrument_bank_detail?n("span",[n("br"),t._v(t._s(t.trans("finance.instrument_bank_detail"))+": "+t._s(t.transaction.instrument_bank_detail))]):t._e(),t._v(" "),t.transaction.reference_number?n("span",[n("br"),t._v(t._s(t.trans("finance.reference_number"))+": "+t._s(t.transaction.reference_number))]):t._e()])],t._v(" "),n("td",[t._v(t._s(t.trans("finance.date_of_entry")))]),t._v(" "),n("td",[t._v(t._s(t._f("momentDateTime")(t.transaction.created_at)))])],2),t._v(" "),n("tr",[t.transaction.is_online_payment?t._e():[n("td",[t._v(t._s(t.trans("finance.remarks")))]),t._v(" "),n("td",[t._v(t._s(t.transaction.remarks))]),t._v(" "),n("td",[t._v(t._s(t.trans("finance.entry_by")))]),t._v(" "),n("td",[t._v("\n                                    "+t._s(t.getEmployeeName(t.transaction.user.employee))+"\n                                ")])]],2)])])]),t._v(" "),t.transaction.is_deletable&&t.hasPermission("cancel-fee-payment")?n("button",{staticClass:"btn btn-block btn-danger",attrs:{type:"button"},on:{click:function(e){t.cancel_fee_payment=!0}}},[t._v(t._s(t.trans("student.cancel_fee_payment")))]):t._e(),t._v(" "),t.cancel_fee_payment?[t.transaction.is_deletable?n("form",{staticClass:"m-t-20",on:{submit:function(e){return e.preventDefault(),t.cancelPayment(e)},keydown:function(e){return t.cancelPaymentForm.errors.clear(e.target.name)}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[t.transactionGroup.length>1?n("div",{staticClass:"form-group"},[n("div",[t._v(t._s(t.trans("finance.cancel_all_group_fee_payment",{numbers:t.transactionGroup.toString()})))])]):t._e(),t._v(" "),n("div",{staticClass:"form-group"},[n("autosize-textarea",{attrs:{rows:"2",name:"cancellation_remarks",placeholder:t.trans("student.cancellation_remarks")},model:{value:t.cancelPaymentForm.cancellation_remarks,callback:function(e){t.$set(t.cancelPaymentForm,"cancellation_remarks",e)},expression:"cancelPaymentForm.cancellation_remarks"}}),t._v(" "),n("show-error",{attrs:{"form-name":t.cancelPaymentForm,"prop-name":"cancellation_remarks"}})],1),t._v(" "),n("button",{staticClass:"btn btn-danger waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])])]):t._e()]:t._e()]:t._e()],2)}),[],!1,null,null,null).exports,_={components:{studentSummary:a.a,feePaymentForm:i,feePaymentParentForm:l,feeDetail:d},data:function(){return{uuid:this.$route.params.uuid,record_id:this.$route.params.record_id,student_record:{fee_allocation:{fee_allocation_groups:[]}},feePayment:{fee_group_name:"",fee_payment_installment_id:"",student_fee_record_id:"",date:helper.today(),installments:[],amount:0},fee:{groups:[]},feePaymentForm:!1,feePaymentShow:!1}},mounted:function(){helper.hasPermission("list-student-fee")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.getRecord(),helper.showDemoNotification(["student"])},methods:{hasPermission:function(t){return helper.hasPermission(t)},hasAnyRole:function(t){return helper.hasAnyRole(t)},hasNotAnyRole:function(t){return helper.hasNotAnyRole(t)},getConfig:function(t){return helper.getConfig(t)},getStudentName:function(t){return helper.getStudentName(t)},getRecord:function(){var t=this,e=this.$loading.show();this.feePaymentForm=!1,this.feePaymentShow=!1,axios.get("/api/student/"+this.uuid+"/fee/"+this.record_id).then((function(n){t.student_record=n.student_record,t.student_record.student_fee_records.length||t.$router.push("/student/"+t.uuid),e.hide()})).catch((function(n){e.hide(),helper.showErrorMsg(n),t.hasAnyRole(["student","parent"])?t.$router.push("/student/list"):t.$router.push("/student/"+t.uuid+"/fee/"+t.record_id+"/create")}))},calculate:function(){var t=this;this.fee={groups:[]},this.student_record.fee_allocation.fee_allocation_groups.forEach((function(e){var n=[],a=[],s=[];a.push(i18n.finance.fee_installment_title),a.push(i18n.finance.fee_installment_due_date),e.fee_group.fee_heads.forEach((function(t){a.push(t.name)})),e.fee_group.options.has_transport&&(a.push(i18n.transport.circle),a.push(i18n.transport.fee)),s.push(i18n.finance.total),s.push(""),a.push(i18n.finance.late_fee),a.push(i18n.finance.installment_total),a.push(i18n.finance.other),a.push(i18n.finance.paid),a.push(i18n.finance.balance),a.push(i18n.finance.fee_status),e.fee_installments.forEach((function(a){var s=t.student_record.student_fee_records.find((function(t){return t.fee_installment_id==a.id})),r=[];r.push({text:a.title}),r.push({text:t.showDate(s.due_date||a.due_date)}),e.fee_group.fee_heads.forEach((function(e){r.push({text:t.getInstallmentFeeAmount(a,e.id),actual:t.getInstallmentFeeAmountWithoutConcession(a,e.id),is_concession:!!t.checkInstallmentConcession(a,e.id)})})),e.fee_group.options.has_transport&&(r.push({text:t.getTransportCircleName(a)}),r.push({text:t.getTransportFeeAmount(a)})),r.push({text:t.getLateFeeAmount(a)}),r.push({text:t.getInstallmentTotalAmount(a)}),r.push({text:t.getInstallmentOtherAmount(a)}),r.push({text:t.getInstallmentPaidAmount(a)}),r.push({text:t.getInstallmentBalanceAmount(a)}),r.push({text:t.getInstallmentPrintStatus(a)}),n.push({data:r})})),e.fee_group.fee_heads.forEach((function(n){s.push(t.getTotalFee(e,n.id))})),e.fee_group.options.has_transport&&(s.push(""),s.push(t.getTransportFeeTotal(e))),s.push(t.getLateFeeTotal(e)),s.push(t.getInstallmentGrandTotal(e)),s.push(t.getInstallmentGrandOther(e)),s.push(t.getInstallmentPaidGrandTotal(e)),s.push(t.getInstallmentBalanceGrandTotal(e)),s.push("");var r={name:e.fee_group.name,heads:a,installments:n,foots:s};t.fee.groups.push(r)}))},formatCurrency:function(t){return helper.formatCurrency(t)},isInstallmentOverdue:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return helper.today()>(e.due_date||t.due_date)&&"paid"!=e.status?helper.getDateDiff(e.due_date||t.due_date):0},getStatus:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return"paid"==e.status?'<span class="label label-success">'+i18n.student.fee_status_paid+"</span>":"partially_paid"==e.status?'<span class="label label-warning">'+i18n.student.fee_status_partially_paid+"</span>":"cancelled"==e.status?'<span class="label label-danger">'+i18n.student.fee_status_cancelled+"</span>":'<span class="label label-danger">'+i18n.student.fee_status_unpaid+"</span>"},getInstallmentDueDate:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return helper.formatDate(e.due_date||t.due_date)},getInstallmentStatus:function(t){return this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id})).status},getInstallmentFee:function(t,e){var n=this.getInstallmentFeeWithoutConcession(t,e);return this.getInstallmentFeeWithConcession(n,t,e)},getInstallmentFeeWithoutConcession:function(t,e){var n=t.fee_installment_details.find((function(t){return t.fee_head_id==e}));return void 0===n?0:this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id})).student_optional_fee_records.findIndex((function(t){return t.fee_head_id==e}))<0?n.amount:0},checkInstallmentConcession:function(t,e){t.fee_installment_details.find((function(t){return t.fee_head_id==e}));var n=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return(n.fee_concession?n.fee_concession.fee_concession_details.findIndex((function(t){return t.fee_head_id==e})):-1)>=0},getInstallmentFeeWithConcession:function(t,e,n){e.fee_installment_details.find((function(t){return t.fee_head_id==n}));var a=this.student_record.student_fee_records.find((function(t){return t.fee_installment_id==e.id})),s=a.fee_concession?a.fee_concession.fee_concession_details.findIndex((function(t){return t.fee_head_id==n})):-1;if(s>=0){var r=a.fee_concession.fee_concession_details[s],i="percent"==r.type?t*(r.amount/100):r.amount;return t-i>=0?Math.ceil(t-i):0}return Math.ceil(t)},getInstallmentFeeAmountWithoutConcession:function(t,e){var n=this.getInstallmentFeeWithoutConcession(t,e);return helper.formatCurrency(n)},getInstallmentFeeAmount:function(t,e){var n=this.getInstallmentFee(t,e);return helper.formatCurrency(n)},getInstallmentTotalWithoutLateFee:function(t){var e=this,n=(this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id})),0);t.fee_installment_details.forEach((function(a){n+=e.getInstallmentFee(t,a.fee_head_id)}));var a=this.getTransportFee(t);return n+=Number.isInteger(a)?a:0},getInstallmentTotal:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id})),n=this.getInstallmentTotalWithoutLateFee(t);if(n||"unpaid"!=e.status){var a=this.getLateFee(t);n+=Number.isInteger(a)?a:0}return n},getInstallmentTotalAmount:function(t){var e=this.getInstallmentTotal(t);return helper.formatCurrency(e)},getInstallmentOther:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id})),n=0;return e.transactions.forEach((function(t){t.is_cancelled||(t.options.additional_fee_charge&&t.options.additional_fee_charge.amount&&(n+=t.options.additional_fee_charge.amount),t.options.additional_fee_discount&&t.options.additional_fee_discount.amount&&(n-=t.options.additional_fee_discount.amount))})),n},getInstallmentOtherAmount:function(t){var e=this.getInstallmentOther(t);return helper.formatCurrency(e)},getInstallmentPaid:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id})),n=0;return e.transactions.forEach((function(t){t.is_cancelled||(n+=t.amount)})),n},getInstallmentPaidAmount:function(t){var e=this.getInstallmentPaid(t);return helper.formatCurrency(e)},getInstallmentBalance:function(t){return this.getInstallmentTotal(t)+this.getInstallmentOther(t)-this.getInstallmentPaid(t)},getInstallmentBalanceAmount:function(t){var e=this.getInstallmentBalance(t);return helper.formatCurrency(e)},getTransportCircleName:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return e.transport_circle?e.transport_circle.name:"-"},getTransportFee:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return e.transport_circle_id&&t.transport_fee_id?t.transport_fee.transport_fee_details.find((function(t){return t.transport_circle_id==e.transport_circle_id})).amount:"-"},getTransportFeeAmount:function(t){var e=this.getTransportFee(t);return Number.isInteger(e)?helper.formatCurrency(e):"-"},getLateFeeAmount:function(t){var e=this.getLateFee(t);return Number.isInteger(e)?helper.formatCurrency(e):"-"},getLateFee:function(t){if(!this.getInstallmentTotalWithoutLateFee(t))return"-";var e=helper.toDate(this.feePayment.date),n=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));if("paid"==n.status)return n.late_fee_charged;if(null==n.late_fee_applicable&&!t.late_fee_applicable||0==n.late_fee_applicable)return"-";if(e<=(n.due_date||t.due_date))return"-";var a=helper.getDateDiff(n.due_date||t.due_date,e),s=Math.floor(a/(n.late_fee_frequency||t.late_fee_frequency));return(n.late_fee||t.late_fee)*s},showInstallmentDetail:function(t,e){var n=this;this.feePayment.installments=[],this.feePayment.fee_group_name=t.fee_group.name;var a=t.fee_installments.filter((function(t){return t.due_date<=e.due_date})),s=0;a.forEach((function(t){var e=n.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));if("unpaid"==e.status||"partially_paid"==e.status){var a=n.getInstallmentTotalWithoutLateFee(t),r=n.getInstallmentOther(t),i=n.getLateFee(t),o=n.getInstallmentPaid(t),l=(a+=r)>o?a-o:0;a&&(i=Number.isInteger(i)?i:0);var c=!l&&i?i-(o-a):i,d=a;a&&(d+=i=Number.isInteger(i)?i:0);var _=d-o;s+=_,n.feePayment.installments.push({fee_installment_id:e.fee_installment_id,title:t.title,installment_fee:a,installment_balance:l,late_fee_balance:Number.isInteger(c)?c:0,late_fee:i,paid:o,total:_})}})),this.feePayment.amount=s,this.feePayment.fee_payment_installment_id=e.id,this.feePaymentForm=!0},getTotalFee:function(t,e){var n=this,a=0;return t.fee_installments.forEach((function(t){a+=n.getInstallmentFee(t,e)})),helper.formatCurrency(a)},getTransportFeeTotal:function(t){var e=this,n=0;return t.fee_installments.forEach((function(t){var a=e.getTransportFee(t);n+=Number.isInteger(a)?a:0})),n?this.formatCurrency(n):"-"},getLateFeeTotal:function(t){var e=this,n=0;return t.fee_installments.forEach((function(t){var a=e.getLateFee(t);n+=Number.isInteger(a)?a:0})),n?this.formatCurrency(n):"-"},getInstallmentGrandTotal:function(t){var e=this.getInstallmentGrandTotalAmount(t);return Number.isInteger(e)?helper.formatCurrency(e):"-"},getInstallmentGrandTotalAmount:function(t){var e=this,n=0;return t.fee_installments.forEach((function(t){n+=e.getInstallmentTotal(t)})),n},getInstallmentGrandOther:function(t){var e=this.getInstallmentGrandOtherAmount(t);return Number.isInteger(e)?helper.formatCurrency(e):"-"},getInstallmentGrandOtherAmount:function(t){var e=this,n=0;return t.fee_installments.forEach((function(t){n+=e.getInstallmentOther(t)})),n},getInstallmentPaidGrandTotal:function(t){var e=this.getInstallmentPaidGrandTotalAmount(t);return Number.isInteger(e)?helper.formatCurrency(e):"-"},getInstallmentPaidGrandTotalAmount:function(t){var e=this,n=0;return t.fee_installments.forEach((function(t){n+=e.getInstallmentPaid(t)})),n},getInstallmentBalanceGrandTotal:function(t){var e=this.getInstallmentBalanceGrandTotalAmount(t);return Number.isInteger(e)?helper.formatCurrency(e):"-"},getInstallmentBalanceGrandTotalAmount:function(t){var e=this,n=0;return t.fee_installments.forEach((function(t){n+=e.getInstallmentBalance(t)})),n},paymentMade:function(){this.getRecord()},showDate:function(t){return helper.formatDate(t)},getInstallmentPrintStatus:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));return"paid"==e.status?i18n.student.fee_status_paid:"partially_paid"==e.status?i18n.student.fee_status_partially_paid:"cancelled"==e.status?i18n.student.fee_status_cancelled:"unpaid"==e.status?i18n.student.fee_status_unpaid:void 0},setTransaction:function(t){var e=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));this.student_fee_record_id=e.id,this.feePaymentShow=!0},print:function(){var t=this.$loading.show();this.calculate(),axios.post("/api/student/"+this.uuid+"/fee/"+this.record_id+"/print",{fee:this.fee}).then((function(e){var n=window.open("/print");t.hide(),n.document.write(e)})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},pdf:function(){var t=this,e=this.$loading.show();this.calculate(),axios.post("/api/student/"+this.uuid+"/fee/"+this.record_id+"/pdf",{fee:this.fee}).then((function(n){e.hide(),window.open("/download/report/"+n+"?token="+t.authToken)})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},confirmEmptyReceiptDelete:function(t){var e=this;return function(n){return e.deleteEmptyReceipt(t)}},deleteEmptyReceipt:function(t){var e=this,n=this.$loading.show(),a=this.student_record.student_fee_records.find((function(e){return e.fee_installment_id==t.id}));axios.post("/api/student/"+this.uuid+"/fee/"+this.record_id+"/"+a.id+"/cancel").then((function(t){toastr.success(t.message),e.getRecord(),n.hide()})).catch((function(t){n.hide(),helper.showErrorMsg(t)}))},confirmResetFee:function(t){var e=this;return function(n){return e.resetFee(t)}},resetFee:function(t){var e=this,n=this.$loading.show();axios.patch("/api/student/"+this.uuid+"/fee/"+this.record_id+"/reset").then((function(t){toastr.success(t.message),e.getRecord(),n.hide()})).catch((function(t){n.hide(),helper.showErrorMsg(t)}))}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}},computed:{authToken:function(){return helper.getAuthToken()},resetFeeOption:function(){return!!this.student_record.id&&this.student_record.student_fee_records.every((function(t){return"unpaid"==t.status}))},finalTotal:function(){var t=this,e=0;return this.student_record.fee_allocation.fee_allocation_groups.forEach((function(n){e+=t.getInstallmentGrandTotalAmount(n)})),helper.formatCurrency(e)},finalOther:function(){var t=this,e=0;return this.student_record.fee_allocation.fee_allocation_groups.forEach((function(n){e+=t.getInstallmentGrandOtherAmount(n)})),helper.formatCurrency(e)},finalPaid:function(){var t=this,e=0;return this.student_record.fee_allocation.fee_allocation_groups.forEach((function(n){e+=t.getInstallmentPaidGrandTotalAmount(n)})),helper.formatCurrency(e)},finalBalance:function(){var t=this,e=0;return this.student_record.fee_allocation.fee_allocation_groups.forEach((function(n){e+=t.getInstallmentBalanceGrandTotalAmount(n)})),helper.formatCurrency(e)}},watch:{"$route.params.uuid":function(t){this.uuid=t,this.record_id=this.$route.params.record_id,this.getRecord()}}},u=(n("rf2E"),Object(r.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"page-titles"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-6"},[n("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("finance.fee_detail"))+" "),t.student_record.student?n("small",[t._v(t._s(t.getStudentName(t.student_record.student))+"  ("+t._s(t.student_record.academic_session.name)+")")]):t._e()])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-6"},[n("div",{staticClass:"action-buttons pull-right"},[n("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/student/list"}},[n("i",{staticClass:"fas fa-list"}),t._v(" "),n("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("student.student")))])]),t._v(" "),n("div",{staticClass:"btn-group"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("general.more_option"),expression:"trans('general.more_option')"}],staticClass:"btn btn-info btn-sm dropdown-toggle no-caret ",attrs:{type:"button",role:"menu",id:"moreOption","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[n("i",{staticClass:"fas fa-ellipsis-h"}),t._v(" "),n("span",{staticClass:"d-none d-sm-inline"})]),t._v(" "),n("div",{class:["dropdown-menu","ltr"==t.getConfig("direction")?"dropdown-menu-right":""],attrs:{"aria-labelledby":"moreOption"}},[n("button",{staticClass:"dropdown-item custom-dropdown",on:{click:function(e){return t.$router.push("/student/"+t.student_record.student.uuid)}}},[n("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.trans("student.view_detail")))]),t._v(" "),t.hasPermission("set-fee")?n("button",{staticClass:"dropdown-item custom-dropdown",on:{click:function(e){return t.$router.push("/student/"+t.student_record.student.uuid+"/fee/"+t.student_record.id+"/set")}}},[n("i",{staticClass:"fas fa-file"}),t._v(" "+t._s(t.trans("student.set_fee")))]):t._e(),t._v(" "),n("button",{staticClass:"dropdown-item custom-dropdown",on:{click:t.print}},[n("i",{staticClass:"fas fa-print"}),t._v(" "+t._s(t.trans("general.print")))]),t._v(" "),n("button",{staticClass:"dropdown-item custom-dropdown",on:{click:t.pdf}},[n("i",{staticClass:"fas fa-file-pdf"}),t._v(" "+t._s(t.trans("general.generate_pdf")))])])])],1)])])]),t._v(" "),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body py-4"},[n("student-summary",{staticClass:"border-bottom",attrs:{"student-record":t.student_record}})],1),t._v(" "),n("div",{staticClass:"card-body"},[t.hasPermission("customize-fee-date")?n("div",{staticClass:"row justify-content-end px-4"},[n("div",{staticClass:"col-12 col-sm-3"},[n("div",{staticClass:"form-group"},[n("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("student.date_of_payment")},model:{value:t.feePayment.date,callback:function(e){t.$set(t.feePayment,"date",e)},expression:"feePayment.date"}})],1)])]):t._e(),t._v(" "),t._l(t.student_record.fee_allocation.fee_allocation_groups,(function(e){return[n("h4",{staticClass:"card-title m-l-20"},[t._v(t._s(e.fee_group.name))]),t._v(" "),n("div",{staticClass:"table-responsive p-3"},[n("table",{staticClass:"table table-sm"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.trans("finance.fee_installment_title")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.fee_installment_due_date")))]),t._v(" "),t._l(e.fee_group.fee_heads,(function(e){return n("th",{domProps:{textContent:t._s(e.name)}})})),t._v(" "),n("th",[e.fee_group.options.has_transport?n("span",[t._v(t._s(t.trans("transport.circle")))]):t._e()]),t._v(" "),n("th",[e.fee_group.options.has_transport?n("span",[t._v(t._s(t.trans("transport.fee")))]):t._e()]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.late_fee")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.installment_total")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.other")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.paid")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.balance")))]),t._v(" "),t.hasPermission("make-fee-payment")?n("th",[t._v(t._s(t.trans("finance.pay_fee")))]):n("th",[t._v(t._s(t.trans("finance.fee_status")))])],2)]),t._v(" "),n("tbody",[t._l(e.fee_installments,(function(a){return n("tr",[n("td",[t._v(t._s(a.title))]),t._v(" "),n("td",[t._v(t._s(t.getInstallmentDueDate(a))+"\n                                                "),t.isInstallmentOverdue(a)?[n("br"),t._v(" "),n("span",{staticClass:"label label-danger"},[t._v(t._s(t.trans("finance.fee_overdue_day",{day:t.isInstallmentOverdue(a)})))])]:t._e()],2),t._v(" "),t._l(e.fee_group.fee_heads,(function(e){return n("td",[t.checkInstallmentConcession(a,e.id)?n("span",{staticStyle:{"text-decoration":"line-through"}},[t._v(t._s(t.getInstallmentFeeAmountWithoutConcession(a,e.id)))]):t._e(),t._v("\n                                                "+t._s(t.getInstallmentFeeAmount(a,e.id))+"\n                                            ")])})),t._v(" "),n("td",[e.fee_group.options.has_transport?n("span",[t._v(t._s(t.getTransportCircleName(a)))]):t._e()]),t._v(" "),n("td",[e.fee_group.options.has_transport?n("span",[t._v(t._s(t.getTransportFeeAmount(a)))]):t._e()]),t._v(" "),n("td",[t._v(t._s(t.getLateFeeAmount(a)))]),t._v(" "),n("td",[t._v(t._s(t.getInstallmentTotalAmount(a)))]),t._v(" "),n("td",[t._v(t._s(t.getInstallmentOtherAmount(a)))]),t._v(" "),n("td",[t._v(t._s(t.getInstallmentPaidAmount(a)))]),t._v(" "),n("td",[t._v(t._s(t.getInstallmentBalanceAmount(a)))]),t._v(" "),t.hasPermission("make-fee-payment")?n("td",["unpaid"==t.getInstallmentStatus(a)?n("span",[n("button",{staticClass:"btn btn-info btn-sm",attrs:{type:"button"},on:{click:function(n){return t.showInstallmentDetail(e,a)}}},[t._v(t._s(t.trans("finance.pay_fee")))])]):"cancelled"==t.getInstallmentStatus(a)?n("span",[n("span",{staticClass:"label label-danger"},[t._v(t._s(t.trans("finance.fee_status_cancelled")))])]):n("span",[n("div",{staticClass:"btn-group"},["paid"==t.getInstallmentStatus(a)?[n("button",{staticClass:"btn btn-sm btn-success"},[t._v(t._s(t.trans("student.fee_status_paid")))]),t._v(" "),t._m(0,!0)]:t._e(),t._v(" "),"partially_paid"==t.getInstallmentStatus(a)?[n("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(n){return t.showInstallmentDetail(e,a)}}},[t._v(t._s(t.trans("student.fee_status_partially_paid")))]),t._v(" "),t._m(1,!0)]:t._e(),t._v(" "),n("div",{staticClass:"dropdown-menu"},[t.getInstallmentPaid(a)?n("button",{staticClass:"dropdown-item custom-dropdown-menu",on:{click:function(e){return e.preventDefault(),t.setTransaction(a)}}},[n("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.trans("finance.receipt_detail"))+"\n                                                            ")]):!t.getInstallmentPaid(a)&&t.hasPermission("cancel-fee-payment")?n("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmEmptyReceiptDelete(a)},expression:"{ok: confirmEmptyReceiptDelete(fee_installment)}"}],key:a.id,staticClass:"dropdown-item custom-dropdown-menu"},[n("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.trans("student.cancel_fee_payment"))+"\n                                                            ")]):t._e()])],2)])]):n("td",["unpaid"==t.getInstallmentStatus(a)?n("span",[t._v(t._s(t.trans("student.fee_status_unpaid")))]):n("span",[t._v(t._s(t.trans("student.fee_status_paid")))])])],2)})),t._v(" "),n("tr",[n("th",{attrs:{colspan:"2"}},[t._v(t._s(t.trans("general.total")))]),t._v(" "),t._l(e.fee_group.fee_heads,(function(a){return n("th",[t._v("\n                                                "+t._s(t.getTotalFee(e,a.id))+"\n                                            ")])})),t._v(" "),n("th"),t._v(" "),n("th",[e.fee_group.options.has_transport?n("span",[t._v(t._s(t.getTransportFeeTotal(e)))]):t._e()]),t._v(" "),n("th",[t._v(t._s(t.getLateFeeTotal(e)))]),t._v(" "),n("th",[t._v(t._s(t.getInstallmentGrandTotal(e)))]),t._v(" "),n("th",[t._v(t._s(t.getInstallmentGrandOther(e)))]),t._v(" "),n("th",[t._v(t._s(t.getInstallmentPaidGrandTotal(e)))]),t._v(" "),n("th",[t._v(t._s(t.getInstallmentBalanceGrandTotal(e)))]),t._v(" "),(t.hasPermission("make-fee-payment"),n("th"))],2)],2)])])]})),t._v(" "),n("div",{staticClass:"table-responsive p-3"},[n("table",{staticClass:"table table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.trans("finance.installment_total")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.other")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.paid")))]),t._v(" "),n("th",[t._v(t._s(t.trans("finance.balance")))])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v(t._s(t.finalTotal))]),t._v(" "),n("td",[t._v(t._s(t.finalOther))]),t._v(" "),n("td",[t._v(t._s(t.finalPaid))]),t._v(" "),n("td",[t._v(t._s(t.finalBalance))])])])])]),t._v(" "),t.resetFeeOption&&t.hasPermission("set-fee")?n("div",{staticClass:"row justify-content-md-center"},[n("div",{staticClass:"col-4"},[n("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmResetFee(t.student_record)},expression:"{ok: confirmResetFee(student_record)}"},{name:"tooltip",rawName:"v-tooltip",value:t.trans("student.reset_fee"),expression:"trans('student.reset_fee')"}],key:t.student_record.id,staticClass:"btn btn-danger btn-block"},[t._v(t._s(t.trans("student.reset_fee")))])])]):t._e()],2)])])])]),t._v(" "),t.feePaymentForm&&t.hasNotAnyRole(["parent","student"])&&t.hasPermission("make-fee-payment")?n("fee-payment-form",{attrs:{uuid:t.uuid,id:t.record_id,"fee-payment":t.feePayment},on:{completed:t.paymentMade,closeFeePaymentForm:function(e){t.feePaymentForm=!1}}}):t._e(),t._v(" "),t.feePaymentForm&&t.hasAnyRole(["parent","student"])&&t.hasPermission("make-fee-payment")?n("fee-payment-parent-form",{attrs:{uuid:t.uuid,id:t.record_id,"fee-payment":t.feePayment},on:{completed:t.paymentMade,closeFeePaymentForm:function(e){t.feePaymentForm=!1}}}):t._e(),t._v(" "),t.feePaymentShow?n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container modal-lg"},[n("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n                            "+t._s(t.trans("finance.fee_payment"))+"\n                            "),n("span",{staticClass:"float-right pointer",on:{click:function(e){t.feePaymentShow=!1}}},[t._v("x")])])],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",[n("div",{staticStyle:{"max-height":"600px"}},[n("fee-detail",{attrs:{uuid:t.uuid,rid:t.record_id,id:t.student_fee_record_id},on:{completed:t.getRecord}}),t._v(" "),n("div",{staticClass:"clearfix"})],1)])],2)])])])]):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-sm btn-success dropdown-toggle dropdown-toggle-split",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("span",{staticClass:"sr-only"},[this._v("Toggle Dropdown")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-sm btn-warning dropdown-toggle dropdown-toggle-split",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("span",{staticClass:"sr-only"},[this._v("Toggle Dropdown")])])}],!1,null,null,null));e.default=u.exports},rf2E:function(t,e,n){"use strict";var a=n("bDPD");n.n(a).a},xjXw:function(t,e,n){var a=n("5JOc");"string"==typeof a&&(a=[[t.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,s);a.locals&&(t.exports=a.locals)}}]);
//# sourceMappingURL=index.js.map?id=6a26ff673ad5ce3c8a34