(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{"7qUo":function(t,e,s){"use strict";var r=s("Mye1");s.n(r).a},"9J2e":function(t,e,s){(t.exports=s("I1BE")(!1)).push([t.i,"\n.loading-overlay.is-full-page{\n    z-index: 1060;\n}\n",""])},HzB3:function(t,e,s){"use strict";s.r(e);var r,n={props:["registration"],components:{},data:function(){return{registrationForm:new Form({course_id:"",date_of_registration:"",registration_remarks:"",previous_institute_id:"",registration_fee:0,custom_values:[]}),courses:[],course_details:[],previous_institutes:[],selected_course:null,selected_previous_institute:null,default_currency:helper.getConfig("default_currency"),registration_fee:0,enable_registration_fee:0,custom_fields:[],custom_values:[],clearCustomField:!1,customFieldFormErrors:{}}},mounted:function(){this.getPreRequisite(),this.registrationForm.course_id=this.registration.course_id,this.registrationForm.previous_institute_id=this.registration.previous_institute_id,this.selected_course={id:this.registration.course_id,name:this.registration.course.name},this.selected_previous_institute=this.registration.previous_institute_id?{id:this.registration.previous_institute_id,name:this.registration.previous_institute.name}:null,this.registrationForm.date_of_registration=this.registration.date_of_registration,this.registrationForm.registration_remarks=this.registration.registration_remarks,this.registrationForm.registration_fee=this.registration.registration_fee,this.custom_values=this.registration.options&&this.registration.options.hasOwnProperty("custom_values")?this.registration.options.custom_values:[]},methods:{getPreRequisite:function(){var t=this,e=this.$loading.show();axios.get("/api/registration/pre-requisite").then((function(s){t.courses=s.courses,t.course_details=s.course_details,t.previous_institutes=s.previous_institutes,t.custom_fields=s.custom_fields,e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},updateCustomValues:function(t){this.registrationForm.custom_values=t},submit:function(){var t=this,e=this.$loading.show();this.registrationForm.patch("/api/registration/"+this.registration.id).then((function(s){toastr.success(s.message),t.$emit("completed"),t.$emit("close"),e.hide()})).catch((function(s){e.hide(),t.customFieldFormErrors=s,helper.showErrorMsg(s)}))},onCourseSelect:function(t){this.registrationForm.course_id=t.id,this.setRegistration(t.id),this.registrationForm.registration_fee=this.registration_fee},onPreviousInstituteSelect:function(t){this.registrationForm.previous_institute_id=t.id},setRegistration:function(t){var e=this.course_details.find((function(e){return e.course_id==t}));this.enable_registration_fee="undefined"!=e?e.enable_registration_fee:0,this.registration_fee=this.enable_registration_fee?e.registration_fee:0},formatCurrency:function(t){return helper.formatCurrency(t)}}},a=s("KHd+"),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)},keydown:function(e){return t.registrationForm.errors.clear(e.target.name)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("academic.course")))]),t._v(" "),s("v-select",{attrs:{label:"name","group-values":"courses","group-label":"course_group","group-select":!1,name:"course_id",id:"course_id",options:t.courses,placeholder:t.trans("academic.select_course")},on:{select:t.onCourseSelect,close:function(e){return t.registrationForm.errors.clear("course_id")},remove:function(e){t.registrationForm.course_id=""}},model:{value:t.selected_course,callback:function(e){t.selected_course=e},expression:"selected_course"}},[t.courses.length?t._e():s("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n                        "+t._s(t.trans("general.no_option_found"))+"\n                    ")])]),t._v(" "),t.enable_registration_fee&&t.registration_fee>=0?s("span",{staticClass:"help-block"},[t._v(t._s(t.trans("student.registration_fee"))+" "+t._s(t.formatCurrency(t.registration_fee)))]):t._e(),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationForm,"prop-name":"course_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.date_of_registration")))]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("student.date_of_registration")},on:{selected:function(e){return t.registrationForm.errors.clear("date_of_registration")}},model:{value:t.registrationForm.date_of_registration,callback:function(e){t.$set(t.registrationForm,"date_of_registration",e)},expression:"registrationForm.date_of_registration"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationForm,"prop-name":"date_of_registration"}})],1)]),t._v(" "),"unpaid"==t.registration.registration_fee_status||null==t.registration.registration_fee_status?s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.registration_fee")))]),t._v(" "),s("currency-input",{attrs:{position:t.default_currency.position,symbol:t.default_currency.symbol,name:"registration_fee",placeholder:t.trans("stduent.registration_fee")},nativeOn:{input:function(e){return t.registrationForm.errors.clear("registration_fee")}},model:{value:t.registrationForm.registration_fee,callback:function(e){t.$set(t.registrationForm,"registration_fee",e)},expression:"registrationForm.registration_fee"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationForm,"prop-name":"registration_fee"}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.previous_institute")))]),t._v(" "),s("v-select",{attrs:{label:"name",name:"previous_institute_id",id:"previous_institute_id",options:t.previous_institutes,placeholder:t.trans("academic.select_institute")},on:{select:t.onPreviousInstituteSelect,close:function(e){return t.registrationForm.errors.clear("previous_institute_id")},remove:function(e){t.registrationForm.previous_institute_id=""}},model:{value:t.selected_previous_institute,callback:function(e){t.selected_previous_institute=e},expression:"selected_previous_institute"}},[t.previous_institutes.length?t._e():s("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n                        "+t._s(t.trans("general.no_option_found"))+"\n                    ")])]),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationForm,"prop-name":"previous_institute_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.registration_remarks")))]),t._v(" "),s("autosize-textarea",{attrs:{rows:"2",name:"registration_remarks",placeholder:t.trans("student.registration_remarks")},model:{value:t.registrationForm.registration_remarks,callback:function(e){t.$set(t.registrationForm,"registration_remarks",e)},expression:"registrationForm.registration_remarks"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationForm,"prop-name":"registration_remarks"}})],1)])]),t._v(" "),s("custom-field",{attrs:{fields:t.custom_fields,customValues:t.custom_values,clear:t.clearCustomField,formErrors:t.customFieldFormErrors},on:{updateCustomValues:t.updateCustomValues}}),t._v(" "),s("div",{staticClass:"card-footer text-right"},[s("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])],1)}),[],!1,null,null,null).exports,o={components:{},props:["registration"],data:function(){return{registrationFeeForm:new Form({account_id:"",payment_method_id:"",date:"",instrument_date:"",instrument_number:"",instrument_clearing_date:"",instrument_bank_detail:"",reference_number:"",remarks:""}),selected_account:null,accounts:[],payment_methods:[],selected_payment_method:null,payment_method_details:[],payment_method_detail:{}}},mounted:function(){this.getPreRequisite()},methods:{getPreRequisite:function(){var t=this,e=this.$loading.show();axios.get("/api/registration/fee/pre-requisite").then((function(s){t.accounts=s.accounts,t.payment_methods=s.payment_methods,t.payment_method_details=s.payment_method_details,e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},getPaymentMethodDetail:function(t){return helper.getPaymentMethodDetail(this.payment_method_detail,t)},onAccountSelect:function(t){this.registrationFeeForm.account_id=t.id},onPaymentMethodSelect:function(t){this.registrationFeeForm.payment_method_id=t.id,this.payment_method_detail=this.payment_method_details.find((function(e){return e.id==t.id}))},onPaymentMethodRemove:function(t){this.registrationFeeForm.payment_method_id="",this.payment_method_detail=null},formatCurrency:function(t){return helper.formatCurrency(t)},submit:function(){var t=this,e=this.$loading.show();this.registrationFeeForm.post("/api/registration/"+this.registration.id+"/fee/payment").then((function(s){toastr.success(s.message),t.selected_account=null,t.$emit("completed"),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))}}},c={components:{},props:["registration"],data:function(){return{actionForm:new Form({status:"",batch_id:null,admission_number_prefix:"",admission_number:"",date_of_admission:"",rejection_remarks:"",admission_remarks:"",transport_circle_id:null,fee_concession_id:null}),admission_numbers:[],batch_current_strength:0,options:[{value:"pending",text:i18n.student.registration_status_pending},{value:"rejected",text:i18n.student.registration_status_rejected},{value:"allotted",text:i18n.student.registration_status_allotted}],transport_circles:[],fee_concessions:[],batches:[]}},mounted:function(){this.actionForm.status=this.registration.status,this.actionForm.date_of_admission=moment().format(),this.getPreRequisite()},methods:{getPreRequisite:function(){var t=this,e=this.$loading.show();axios.get("/api/registration/status/pre-requisite").then((function(s){t.transport_circles=s.transport_circles,t.fee_concessions=s.fee_concessions,t.admission_numbers=s.admission_numbers,t.actionForm.admission_number_prefix=helper.getConfig("admission_number_prefix"),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},submit:function(){var t=this,e=this.$loading.show();this.actionForm.post("/api/registration/"+this.registration.id+"/update/status").then((function(s){toastr.success(s.message),t.$emit("completed"),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},fetchStrength:function(){var t=this,e=this.$loading.show();if(!this.actionForm.batch_id)return this.batch_current_strength=0,void e.hide();this.actionForm.errors.clear("batch_id"),axios.post("/api/batch/"+this.actionForm.batch_id+"/strength").then((function(s){t.batch_current_strength=s,e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))}},watch:{registration:function(t){this.actionForm.status=t.status},"actionForm.admission_number_prefix":function(t){var e=this.admission_numbers.find((function(e){return e.prefix==t}));this.actionForm.admission_number=void 0===e?helper.formatWithPadding(1,helper.getConfig("admission_number_digit")):helper.formatWithPadding(e.number+1,helper.getConfig("admission_number_digit"))}}};function _(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var l={components:{feeForm:Object(a.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-form"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("student.pay_registration_fee"))+" "+t._s(t.formatCurrency(t.registration.registration_fee)))]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)},keydown:function(e){return t.registrationFeeForm.errors.clear(e.target.name)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.account")))]),t._v(" "),s("v-select",{attrs:{label:"name",name:"account_id",id:"account_id",options:t.accounts,placeholder:t.trans("account.select_account")},on:{select:t.onAccountSelect,close:function(e){return t.registrationFeeForm.errors.clear("account_id")},remove:function(e){t.registrationFeeForm.account_id=""}},model:{value:t.selected_account,callback:function(e){t.selected_account=e},expression:"selected_account"}},[t.accounts.length?t._e():s("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n                                    "+t._s(t.trans("general.no_option_found"))+"\n                                ")])]),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"account_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.date_of_payment")))]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("student.date_of_payment")},on:{selected:function(e){return t.registrationFeeForm.errors.clear("date")}},model:{value:t.registrationFeeForm.date,callback:function(e){t.$set(t.registrationFeeForm,"date",e)},expression:"registrationFeeForm.date"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"date"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.payment_method")))]),t._v(" "),s("v-select",{attrs:{label:"name",name:"payment_method_id",id:"payment_method_id",options:t.payment_methods,placeholder:t.trans("payment_method.select_payment_method")},on:{select:t.onPaymentMethodSelect,close:function(e){return t.registrationFeeForm.errors.clear("payment_method_id")},remove:t.onPaymentMethodRemove},model:{value:t.selected_payment_method,callback:function(e){t.selected_payment_method=e},expression:"selected_payment_method"}},[t.payment_methods.length?t._e():s("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n                                    "+t._s(t.trans("general.no_option_found"))+"\n                                ")])]),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"payment_method_id"}})],1)]),t._v(" "),t.getPaymentMethodDetail("instrument_number")?s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_number")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.registrationFeeForm.instrument_number,expression:"registrationFeeForm.instrument_number"}],staticClass:"form-control",attrs:{type:"text",name:"instrument_number",placeholder:t.trans("finance.instrument_number")},domProps:{value:t.registrationFeeForm.instrument_number},on:{input:function(e){e.target.composing||t.$set(t.registrationFeeForm,"instrument_number",e.target.value)}}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"instrument_number"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_date")?s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_date")))]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("finance.instrument_date")},on:{selected:function(e){return t.registrationFeeForm.errors.clear("instrument_date")}},model:{value:t.registrationFeeForm.instrument_date,callback:function(e){t.$set(t.registrationFeeForm,"instrument_date",e)},expression:"registrationFeeForm.instrument_date"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"instrument_date"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_bank_detail")?s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_bank_detail")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.registrationFeeForm.instrument_bank_detail,expression:"registrationFeeForm.instrument_bank_detail"}],staticClass:"form-control",attrs:{type:"text",name:"instrument_bank_detail",placeholder:t.trans("finance.instrument_bank_detail")},domProps:{value:t.registrationFeeForm.instrument_bank_detail},on:{input:function(e){e.target.composing||t.$set(t.registrationFeeForm,"instrument_bank_detail",e.target.value)}}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"instrument_bank_detail"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("instrument_clearing_date")?s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.instrument_clearing_date")))]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("finance.instrument_clearing_date")},on:{selected:function(e){return t.registrationFeeForm.errors.clear("instrument_clearing_date")}},model:{value:t.registrationFeeForm.instrument_clearing_date,callback:function(e){t.$set(t.registrationFeeForm,"instrument_clearing_date",e)},expression:"registrationFeeForm.instrument_clearing_date"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"instrument_clearing_date"}})],1)]):t._e(),t._v(" "),t.getPaymentMethodDetail("reference_number")?s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.reference_number")))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.registrationFeeForm.reference_number,expression:"registrationFeeForm.reference_number"}],staticClass:"form-control",attrs:{type:"text",name:"reference_number",placeholder:t.trans("finance.reference_number")},domProps:{value:t.registrationFeeForm.reference_number},on:{input:function(e){e.target.composing||t.$set(t.registrationFeeForm,"reference_number",e.target.value)}}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"reference_number"}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"col-12 col-sm-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.registration_fee_remarks")))]),t._v(" "),s("autosize-textarea",{attrs:{rows:"2",name:"remarks",placeholder:t.trans("student.registration_fee_remarks")},model:{value:t.registrationFeeForm.remarks,callback:function(e){t.$set(t.registrationFeeForm,"remarks",e)},expression:"registrationFeeForm.remarks"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.registrationFeeForm,"prop-name":"remarks"}})],1)])]),t._v(" "),s("div",{staticClass:"card-footer text-right"},[s("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])])])])}),[],!1,null,null,null).exports,actionForm:Object(a.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-form"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("student.registration_action")))]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)},keydown:function(e){return t.actionForm.errors.clear(e.target.name)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.registration_status")))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.actionForm.status,expression:"actionForm.status"}],staticClass:"custom-select col-12",attrs:{placeholder:"Select Mari",name:"status"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.actionForm,"status",e.target.multiple?s:s[0])},function(e){return t.actionForm.errors.clear("status")}]}},t._l(t.options,(function(e){return s("option",{domProps:{value:e.value}},[t._v("\n                                "+t._s(e.text)+"\n                              ")])})),0),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"status"}})],1)])]),t._v(" "),"rejected"==t.actionForm.status?[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.rejection_remarks")))]),t._v(" "),s("autosize-textarea",{attrs:{rows:"2",name:"rejection_remarks",placeholder:t.trans("student.rejection_remarks")},model:{value:t.actionForm.rejection_remarks,callback:function(e){t.$set(t.actionForm,"rejection_remarks",e)},expression:"actionForm.rejection_remarks"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"rejection_remarks"}})],1)])]),t._v(" "),s("div",{staticClass:"card-footer text-right"},[s("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])]:t._e(),t._v(" "),"allotted"==t.actionForm.status?[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.admission_number")))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.actionForm.admission_number_prefix,expression:"actionForm.admission_number_prefix"}],staticClass:"form-control",attrs:{type:"text",name:"admission_number_prefix",placeholder:t.trans("student.admission_number_prefix")},domProps:{value:t.actionForm.admission_number_prefix},on:{input:function(e){e.target.composing||t.$set(t.actionForm,"admission_number_prefix",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"col-12 col-sm-8"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.actionForm.admission_number,expression:"actionForm.admission_number"}],staticClass:"form-control",attrs:{type:"text",name:"admission_number",placeholder:t.trans("student.admission_number")},domProps:{value:t.actionForm.admission_number},on:{input:function(e){e.target.composing||t.$set(t.actionForm,"admission_number",e.target.value)}}})])]),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"admission_number"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("academic.batch")))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.actionForm.batch_id,expression:"actionForm.batch_id"}],staticClass:"custom-select col-12",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.actionForm,"batch_id",e.target.multiple?s:s[0])},t.fetchStrength]}},[s("option",{attrs:{value:"null",selected:""}},[t._v(t._s(t.trans("academic.select_batch")))]),t._v(" "),t._l(t.registration.course.batches,(function(e){return s("option",{domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.registration.course.name+" "+e.name)+"\n\t\t\t\t\t\t\t\t\t")])}))],2),t._v(" "),t.actionForm.batch_id&&t.batch_current_strength>=0?s("div",{staticClass:"help-block"},[t._v(t._s(t.trans("academic.current_strength")+": "+t.batch_current_strength))]):t._e(),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"batch_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("transport.circle")))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.actionForm.transport_circle_id,expression:"actionForm.transport_circle_id"}],staticClass:"custom-select col-12",attrs:{name:"transport_circle_id"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.actionForm,"transport_circle_id",e.target.multiple?s:s[0])},function(e){return t.actionForm.errors.clear("transport_circle_id")}]}},[s("option",{attrs:{value:"null",selected:""}},[t._v(t._s(t.trans("transport.no_transport_circle")))]),t._v(" "),t._l(t.transport_circles,(function(e){return s("option",{domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")])}))],2),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"transport_circle_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("finance.fee_concession")))]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.actionForm.fee_concession_id,expression:"actionForm.fee_concession_id"}],staticClass:"custom-select col-12",attrs:{name:"fee_concession_id"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.actionForm,"fee_concession_id",e.target.multiple?s:s[0])},function(e){return t.actionForm.errors.clear("fee_concession_id")}]}},[s("option",{attrs:{value:"null",selected:""}},[t._v(t._s(t.trans("finance.no_fee_concession")))]),t._v(" "),t._l(t.fee_concessions,(function(e){return s("option",{domProps:{value:e.id}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")])}))],2),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"fee_concession_id"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.date_of_admission")))]),t._v(" "),s("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("student.date_of_admission")},on:{selected:function(e){return t.actionForm.errors.clear("date_of_admission")}},model:{value:t.actionForm.date_of_admission,callback:function(e){t.$set(t.actionForm,"date_of_admission",e)},expression:"actionForm.date_of_admission"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"date_of_admission"}})],1)]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.admission_remarks")))]),t._v(" "),s("autosize-textarea",{attrs:{rows:"1",name:"admission_remarks",placeholder:t.trans("student.admission_remarks")},model:{value:t.actionForm.admission_remarks,callback:function(e){t.$set(t.actionForm,"admission_remarks",e)},expression:"actionForm.admission_remarks"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.actionForm,"prop-name":"admission_remarks"}})],1)])]),t._v(" "),s("div",{staticClass:"card-footer text-right"},[s("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])]:t._e()],2)])])}),[],!1,null,null,null).exports,editRegistrationForm:i},data:function(){return{id:this.$route.params.id,registration:{student:{},course:{},transaction:null},transaction:{},show_edit:!1,cancel_fee_payment:!1,cancelPaymentForm:new Form({cancellation_remarks:""}),registration_custom_fields:[],online_registration_custom_fields:[],editModal:!1,showReceiptModal:!1}},mounted:function(){helper.hasPermission("list-registration")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.getRegistration()},methods:(r={getRegistration:function(){var t=this,e=this.$loading.show();axios.get("/api/registration/"+this.id).then((function(s){t.registration_custom_fields=s.registration_custom_fields,t.online_registration_custom_fields=s.online_registration_custom_fields,t.registration=s.registration,t.transaction=s.registration.transactions.length?s.registration.transactions[0]:null,e.hide()})).catch((function(s){e.hide(),helper.showErrorMsg(s),t.$router.push("/dashboard")}))},hasPermission:function(t){return helper.hasPermission(t)},getStudentName:function(t){return helper.getStudentName(t)},formatCurrency:function(t){return helper.formatCurrency(t)},getRegistrationStatus:function(t){return helper.getRegistrationStatus(t)}},_(r,"hasPermission",(function(t){return helper.hasPermission(t)})),_(r,"getEmployeeName",(function(t){return helper.getEmployeeName(t)})),_(r,"getCustomFieldValue",(function(t){return helper.getCustomFieldValue(this.registration.options.custom_values,t.id)})),_(r,"cancelPayment",(function(){var t=this,e=this.$loading.show();this.cancelPaymentForm.post("/api/registration/"+this.id+"/transaction/"+this.transaction.id+"/cancel").then((function(s){toastr.success(s.message),t.getRegistration(),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))})),_(r,"confirmDelete",(function(t){var e=this;return function(s){return e.deleteRegistration(t)}})),_(r,"deleteRegistration",(function(t){var e=this,s=this.$loading.show();axios.delete("/api/registration/"+t.id).then((function(t){toastr.success(t.message),s.hide(),e.$router.push("/student/registration")})).catch((function(t){s.hide(),helper.showErrorMsg(t)}))})),_(r,"printReceipt",(function(){var t=this.$loading.show();axios.post("/api/registration/"+this.id+"/fee/"+this.transaction.id+"/print").then((function(e){var s=window.open("/print");t.hide(),s.document.write(e)})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))})),r),computed:{getSession:function(){return helper.getDefaultAcademicSession().name}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)}}},m=(s("7qUo"),Object(a.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-titles"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("student.registration"))+"\n                    "),t.registration.student?s("span",{staticClass:"card-subtitle d-none d-sm-inline"},[t._v("("+t._s(t.getStudentName(t.registration.student)+" - "+t.trans("student.registration_no")+": "+t.registration.id)+") ")]):t._e()])]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"action-buttons pull-right"},[s("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/student/registration/card-view"}},[s("i",{staticClass:"fas fa-list"}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("student.registration")))])]),t._v(" "),s("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/student/"+t.registration.student.uuid}},[s("i",{staticClass:"fas fa-user"}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("student.student_detail")))])])],1)])])]),t._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"card border-right"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title m-3"},[s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("student.registration_detail")))]),t._v(" "),t.registration.registration_fee&&"paid"==t.registration.registration_fee_status&&t.registration.transactions.length?s("div",{staticClass:"dropdown pull-right"},[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("general.more_option"),expression:"trans('general.more_option')"}],staticClass:"btn btn-info btn-xs",attrs:{type:"button",href:"#",role:"button",id:"moreOption","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[s("i",{staticClass:"fas fa-ellipsis-h"}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("finance.receipt")))])]),t._v(" "),s("div",{staticClass:"dropdown-menu"},[s("button",{staticClass:"dropdown-item custom-dropdown-menu",on:{click:function(e){t.showReceiptModal=!0}}},[s("i",{staticClass:"fas fa-arrow-circle-right"}),t._v(" "+t._s(t.trans("finance.receipt_detail")))]),t._v(" "),s("button",{staticClass:"dropdown-item custom-dropdown-menu",on:{click:t.printReceipt}},[s("i",{staticClass:"fas fa-print"}),t._v(" "+t._s(t.trans("finance.print_receipt")))])])]):t._e(),t._v(" "),"pending"==t.registration.status?s("button",{staticClass:"btn btn-info btn-xs pull-right ",attrs:{type:"button"},on:{click:function(e){t.editModal=!0}}},[s("i",{staticClass:"fas fa-edit"}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("general.edit")))])]):t._e(),t._v(" "),"pending"==t.registration.status&&t.hasPermission("delete-registration")?s("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmDelete(t.registration)},expression:"{ok: confirmDelete(registration)}"},{name:"tooltip",rawName:"v-tooltip",value:t.trans("student.delete_registartion"),expression:"trans('student.delete_registartion')"}],key:t.registration.id,staticClass:"btn btn-danger btn-xs pull-right ",attrs:{type:"button"}},[s("i",{staticClass:"fas fa-trash"}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("general.delete")))])]):t._e()]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-sm custom-show-table"},[s("tbody",[s("tr",[s("td",[t._v(t._s(t.trans("student.name")))]),t._v(" "),s("td",[t._v("\n                                            "+t._s(t.getStudentName(t.registration.student))+"\n                                            "),t.registration.is_online?s("span",[s("span",{staticClass:"label label-info"},[t._v(t._s(t.trans("student.online_registration")))])]):t._e()])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.registration_status")))]),t._v(" "),s("td",t._l(t.getRegistrationStatus(t.registration),(function(e){return s("span",{class:["label","label-"+e.color,"m-r-5"]},[t._v(t._s(e.label))])})),0)]),t._v(" "),t.registration.rejection_remarks&&"rejected"==t.registration.status?s("tr",[s("td",[t._v(t._s(t.trans("student.rejection_remarks")))]),t._v(" "),s("td",{staticClass:"text-danger"},[t._v(t._s(t.registration.rejection_remarks))])]):t._e(),t._v(" "),s("tr",{on:{mouseover:function(e){t.show_edit=!0},mouseout:function(e){t.show_edit=!1}}},[s("td",[t._v(t._s(t.trans("academic.course")))]),t._v(" "),s("td",[t._v("\n                                            "+t._s(t.registration.course.name+" "+t.getSession)+"\n                                        ")])]),t._v(" "),"allotted"==t.registration.status?s("tr",[s("td",[t._v(t._s(t.trans("academic.batch")))]),t._v(" "),s("td",[t._v(t._s(t.registration.admission.batch.name)+"\n                                        ")])]):t._e(),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.father_name")))]),t._v(" "),s("td",[t._v(t._s(t.registration.student.parent?t.registration.student.parent.father_name:""))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.mother_name")))]),t._v(" "),s("td",[t._v(t._s(t.registration.student.parent?t.registration.student.parent.mother_name:""))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.contact_number")))]),t._v(" "),s("td",[t._v(t._s(t.registration.student.contact_number))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.gender")))]),t._v(" "),s("td",[t._v(t._s(t.trans("list."+t.registration.student.gender)))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.date_of_birth")))]),t._v(" "),s("td",[t._v(t._s(t._f("moment")(t.registration.student.date_of_birth)))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("student.date_of_registration")))]),t._v(" "),s("td",[t._v(t._s(t._f("moment")(t.registration.date_of_registration)))])]),t._v(" "),t.registration.previous_institute_id?s("tr",[s("td",[t._v(t._s(t.trans("student.previous_institute")))]),t._v(" "),s("td",[t._v(t._s(t.registration.previous_institute.name))])]):t._e(),t._v(" "),s("tr",{on:{mouseover:function(e){t.show_edit=!0},mouseout:function(e){t.show_edit=!1}}},[s("td",[t._v(t._s(t.trans("student.registration_fee")))]),t._v(" "),s("td",[t.registration.registration_fee?s("span",[t._v("\n                                                "+t._s(t.formatCurrency(t.registration.registration_fee))+"\n                                                "),"paid"==t.registration.registration_fee_status?s("span",[s("span",{staticClass:"label label-success"},[t._v(t._s(t.trans("student.registration_fee_status_paid"))+"\n                                                        "+t._s(t.trans("general.on"))+"\n                                                        "),t.registration.transactions.length?s("span",[t._v("\n                                                            "+t._s(t._f("moment")(t.transaction.date))+"\n                                                        ")]):t._e()])]):s("span",{staticClass:"label label-danger"},[t._v(t._s(t.trans("student.registration_fee_status_unpaid")))])]):s("span",[t._v("-")])])]),t._v(" "),t.registration.registration_remarks?s("tr",[s("td",[t._v(t._s(t.trans("student.registration_remarks")))]),t._v(" "),s("td",[t._v(t._s(t.registration.registration_remarks))])]):t._e(),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("general.created_at")))]),t._v(" "),s("td",[t._v(t._s(t._f("momentDateTime")(t.registration.student.created_at)))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("general.updated_at")))]),t._v(" "),s("td",[t._v(t._s(t._f("momentDateTime")(t.registration.student.updated_at)))])]),t._v(" "),t._l(t.online_registration_custom_fields,(function(e){return t.registration.is_online?s("tr",[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(t.getCustomFieldValue(e)))])]):t._e()})),t._v(" "),t._l(t.registration_custom_fields,(function(e){return s("tr",[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(t.getCustomFieldValue(e)))])])}))],2)])])])])]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6 p-0"},[t.registration.registration_fee?["unpaid"==t.registration.registration_fee_status&&t.hasPermission("make-registration-fee-payment")?s("fee-form",{attrs:{registration:t.registration},on:{completed:t.getRegistration}}):t._e()]:t._e(),t._v(" "),(!t.registration.registration_fee||t.registration.registration_fee&&"paid"==t.registration.registration_fee_status)&&"allotted"!=t.registration.status&&t.hasPermission("change-registration-status")?[s("action-form",{attrs:{registration:t.registration},on:{completed:t.getRegistration}})]:t._e()],2)])]),t._v(" "),t.editModal?s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container modal-lg"},[s("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n                            "+t._s(t.trans("student.edit_registration"))+"\n                            "),s("span",{staticClass:"float-right pointer",on:{click:function(e){t.editModal=!1}}},[t._v("x")])])],2),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("body",[s("edit-registration-form",{attrs:{registration:t.registration},on:{completed:t.getRegistration,close:function(e){t.editModal=!1}}}),t._v(" "),s("div",{staticClass:"clearfix"})])],2)])])])]):t._e(),t._v(" "),t.showReceiptModal&&t.registration.registration_fee&&"paid"==t.registration.registration_fee_status&&t.registration.transactions.length?s("transition",{attrs:{name:"modal"}},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container modal-lg"},[s("div",{staticClass:"modal-header"},[t._t("header",[t._v("\n                            "+t._s(t.trans("finance.receipt_detail"))+"\n                            "),s("span",{staticClass:"float-right pointer",on:{click:function(e){t.showReceiptModal=!1}}},[t._v("x")])])],2),t._v(" "),s("div",{staticClass:"modal-body"},[t._t("body",[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered"},[s("tbody",[s("tr",[s("td",[t._v(t._s(t.trans("finance.receipt_no")))]),t._v(" "),s("td",[t._v("#"+t._s(t.transaction.prefix+t.transaction.number))]),t._v(" "),s("td",[t._v(t._s(t.trans("finance.account")))]),t._v(" "),s("td",[t._v(t._s(t.transaction.account.name))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("finance.amount")))]),t._v(" "),s("td",[t._v(t._s(t.formatCurrency(t.transaction.amount)))]),t._v(" "),s("td",[t._v(t._s(t.trans("finance.date")))]),t._v(" "),s("td",[t._v(t._s(t._f("moment")(t.transaction.date)))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("finance.payment_method")))]),t._v(" "),s("td",[t._v("\n                                                "+t._s(t.transaction.payment_method.name)+"\n                                                "),t.transaction.instrument_number?s("span",[s("br"),t._v(t._s(t.trans("finance.instrument_number"))+": "+t._s(t.transaction.instrument_number))]):t._e(),t._v(" "),t.transaction.instrument_date?s("span",[s("br"),t._v(t._s(t.trans("finance.instrument_date"))+": "),s("span",[t._v(t._s(t._f("moment")(t.transaction.instrument_date)))])]):t._e(),t._v(" "),t.transaction.instrument_clearing_date?s("span",[s("br"),t._v(t._s(t.trans("finance.instrument_clearing_date"))+": "),s("span",[t._v(t._s(t._f("moment")(t.transaction.instrument_clearing_date)))])]):t._e(),t._v(" "),t.transaction.instrument_bank_detail?s("span",[s("br"),t._v(t._s(t.trans("finance.instrument_bank_detail"))+": "+t._s(t.transaction.instrument_bank_detail))]):t._e(),t._v(" "),t.transaction.reference_number?s("span",[s("br"),t._v(t._s(t.trans("finance.reference_number"))+": "+t._s(t.transaction.reference_number))]):t._e()]),t._v(" "),s("td",[t._v(t._s(t.trans("finance.remarks")))]),t._v(" "),s("td",[t._v(t._s(t.transaction.remarks))])]),t._v(" "),s("tr",[s("td",[t._v(t._s(t.trans("finance.date_of_entry")))]),t._v(" "),s("td",[t._v(t._s(t._f("momentDateTime")(t.transaction.created_at)))]),t._v(" "),s("td",[t._v(t._s(t.trans("finance.entry_by")))]),t._v(" "),s("td",[t._v(t._s(t.getEmployeeName(t.transaction.user.employee)))])])])])]),t._v(" "),"pending"==t.registration.status?s("button",{staticClass:"btn btn-block btn-danger",attrs:{type:"button"},on:{click:function(e){t.cancel_fee_payment=!0}}},[t._v(t._s(t.trans("student.cancel_fee_payment")))]):t._e(),t._v(" "),t.cancel_fee_payment?["pending"==t.registration.status?s("form",{staticClass:"m-t-20",on:{submit:function(e){return e.preventDefault(),t.cancelPayment(e)},keydown:function(e){return t.cancelPaymentForm.errors.clear(e.target.name)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("autosize-textarea",{attrs:{rows:"2",name:"cancellation_remarks",placeholder:t.trans("student.cancellation_remarks")},model:{value:t.cancelPaymentForm.cancellation_remarks,callback:function(e){t.$set(t.cancelPaymentForm,"cancellation_remarks",e)},expression:"cancelPaymentForm.cancellation_remarks"}}),t._v(" "),s("show-error",{attrs:{"form-name":t.cancelPaymentForm,"prop-name":"cancellation_remarks"}})],1),t._v(" "),s("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])])]):t._e()]:t._e(),t._v(" "),s("div",{staticClass:"clearfix"})])],2)])])])]):t._e()],1)}),[],!1,null,null,null));e.default=m.exports},Mye1:function(t,e,s){var r=s("9J2e");"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};s("aET+")(r,n);r.locals&&(t.exports=r.locals)}}]);
//# sourceMappingURL=show.js.map?id=be1465dc1a870cd011f3